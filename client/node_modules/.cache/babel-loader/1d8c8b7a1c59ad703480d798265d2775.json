{"ast":null,"code":"import _objectSpread from \"/Users/joshkardos/Desktop/JTKStaffing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/joshkardos/Desktop/JTKStaffing/src/Containers/Dashboard/DashboardLayout.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport FileUploader from 'react-firebase-file-uploader';\nimport Generator from 'generate-password'; // import Calendar from 'react-calendar' // https://www.npmjs.com/package/react-calendar\n// import DatePicker from 'react-datepicker'; // https://www.npmjs.com/package/react-datepicker\n// import 'react-datepicker/dist/react-datepicker.css';\n// import ReactDataSheet from 'react-datasheet';\n// // Be sure to include styles at some point, probably during your bootstrapping\n// import 'react-datasheet/lib/react-datasheet.css'; // https://github.com/nadbm/react-datasheet\n// import { FilePicker } from 'react-file-picker'\n\nimport DayPicker from 'react-day-picker'; // https://react-day-picker.js.org/examples/selected-week\n\nimport Loader from 'react-loader-spinner';\nimport firebase from '../../Firebase/index';\nimport 'react-day-picker/lib/style.css';\nimport { getWeekDays, getWeekRange } from '../../helpers/CalendarHelpers';\nimport RecentTimesheet from './Worker/RecentTimesheet/RecentTimesheet';\nimport AdminTimesheetTile from './Admin/AdminTimesheetTile/AdminTimesheetTile';\nimport redX from '../../redX.png';\nimport greenCheck from '../../greenCheck.jpg';\nimport Styles from './DashboardLayoutStyles';\nimport { validateEmail } from '../../helpers/UserHelpers';\nconst AdminLayouts = {\n  HOME: 'HOME',\n  TIMESHEETS: 'TIMESHEETS',\n  EMPLOYEES: 'EMPLOYEES',\n  SETTINGS: 'SETTINGS'\n};\n\nclass DashboardLayout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleFilterPressed = event => {\n      const filtersApplied = this.state.filtersApplied;\n      const timePeriod = event.target.value;\n\n      if (filtersApplied.includes(timePeriod)) {\n        // remove\n        this.setState({\n          filtersApplied: filtersApplied.filter(filter => filter !== timePeriod)\n        });\n      } else {\n        // add\n        this.setState({\n          filtersApplied: [...filtersApplied, timePeriod]\n        });\n      }\n    };\n\n    this.handleEmployeeIdSubmissionTimePeriodsMap = (userId, timePeriodArr) => {\n      const employeeIdSubmissionTimePeriodsMap = this.state.employeeIdSubmissionTimePeriodsMap;\n\n      const map = _objectSpread({}, employeeIdSubmissionTimePeriodsMap);\n\n      map[userId] = timePeriodArr;\n      this.setState({\n        employeeIdSubmissionTimePeriodsMap: map\n      });\n    };\n\n    this.handleAddSubmissionTimePeriods = timePeriodsArr => {\n      const submissionTimePeriods = this.state.submissionTimePeriods;\n      const timePeriodSet = new Set(submissionTimePeriods);\n      timePeriodsArr.forEach(item => timePeriodSet.add(item));\n      this.setState({\n        submissionTimePeriods: timePeriodSet\n      });\n    };\n\n    this.startUploadManually = () => {\n      const setTimesheetFileError = this.props.setTimesheetFileError;\n      const timesheetFile = this.state.timesheetFile;\n\n      if (!navigator.onLine) {\n        setTimesheetFileError({\n          payload: 'Check internet connection...'\n        });\n        return;\n      }\n\n      this.fileUploader.startUpload(timesheetFile);\n    };\n\n    this.handleDayChange = date => {\n      this.setState({\n        selectedDays: getWeekDays(getWeekRange(date).from)\n      });\n    };\n\n    this.handleDayEnter = date => {\n      this.setState({\n        hoverRange: getWeekRange(date)\n      });\n    };\n\n    this.handleDayLeave = () => {\n      this.setState({\n        hoverRange: null // cahnge this\n\n      });\n    };\n\n    this.handleWeekClick = (weekNumber, days) => {\n      this.setState({\n        selectedDays: days\n      });\n    };\n\n    this.handleNameChange = evt => {\n      this.setState({\n        name: evt.target.value\n      });\n    };\n\n    this.handleEmailChange = evt => {\n      this.setState({\n        email: evt.target.value\n      });\n    };\n\n    this.handlePassChange = evt => {\n      this.setState({\n        password: evt.target.value\n      });\n    };\n\n    this.searchTextFieldChanged = evt => {\n      this.setState({\n        adminTimesheetsSearchText: evt.target.value\n      });\n    };\n\n    this.handleSubmit = evt => {\n      const _this$state = this.state,\n            name = _this$state.name,\n            email = _this$state.email,\n            password = _this$state.password;\n      const _this$props = this.props,\n            signUpWorker = _this$props.signUpWorker,\n            setSignUpError = _this$props.setSignUpError;\n      evt.preventDefault();\n\n      if (!name.replace(/\\s+/g, '')) {\n        const action = {\n          payload: 'Name is required'\n        };\n        return setSignUpError(action);\n      }\n\n      if (!email.replace(/\\s+/g, '')) {\n        const action = {\n          payload: 'Email is required'\n        };\n        return setSignUpError(action);\n      }\n\n      if (!password.replace(/\\s+/g, '')) {\n        const action = {\n          payload: 'Password is required'\n        };\n        return setSignUpError(action);\n      }\n\n      if (!validateEmail(email)) {\n        const action = {\n          payload: 'Invalid email'\n        };\n        return setSignUpError(action);\n      }\n\n      const action = {\n        name,\n        email,\n        password\n      };\n      return signUpWorker(action);\n    };\n\n    this.state = {\n      timesheetTimestamp: null,\n      timesheetFile: null,\n      hoverRange: null,\n      selectedDays: [],\n      currentAdminLayout: AdminLayouts.TIMESHEETS,\n      // Add employee state\n      shouldShowAddEmployee: false,\n      email: '',\n      password: '',\n      name: '',\n      // admin view\n      filtersApplied: [],\n      submissionTimePeriods: new Set(),\n      // 'September 2, 2019 - September 8, 2019'\n      employeeIdSubmissionTimePeriodsMap: {} // { 12345678 : 'September 2, 2019 - September 8, 2019', 987654321 : 'September 2, 2019 - September 8, 2019' }\n\n    };\n    this.fileUploader = null;\n  }\n\n  clearFields() {\n    this.setState({\n      timesheetFile: null,\n      selectedDays: [],\n      hoverRange: null\n    });\n  }\n\n  addEmployeeClicked() {\n    // const { addEmployeeUnderAdmin } = this.props\n    this.setState({\n      shouldShowAddEmployee: true,\n      password: Generator.generate({\n        length: 10\n      })\n    }); // return addEmployeeUnderAdmin\n  }\n\n  renderFileName() {\n    const timesheetFile = this.state.timesheetFile;\n    return React.createElement(\"p\", {\n      style: Styles.FileName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, timesheetFile.name);\n  } // eslint-disable-next-line class-methods-use-this\n\n\n  renderFirstStep(daysAreSelected, daysSelectedText) {\n    if (daysAreSelected) {\n      return React.createElement(\"div\", {\n        style: Styles.StepRow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"1. \", daysSelectedText), React.createElement(\"img\", {\n        src: greenCheck,\n        style: Styles.redX,\n        alt: \"redX\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      style: Styles.StepRow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, \"1. Select your time period\"), React.createElement(\"img\", {\n      src: redX,\n      style: Styles.redX,\n      alt: \"redX\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }));\n  }\n\n  renderSecondStep() {\n    const timesheetFile = this.state.timesheetFile;\n\n    if (timesheetFile) {\n      return React.createElement(\"div\", {\n        style: Styles.StepRow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \"2. \", timesheetFile.name), React.createElement(\"img\", {\n        src: greenCheck,\n        style: Styles.redX,\n        alt: \"redX\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      style: Styles.StepRow,\n      onMouseEnter: this.toggleHover,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"2. Upload excel file (xlsx)\"), React.createElement(\"img\", {\n      src: redX,\n      style: Styles.redX,\n      alt: \"redX\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }));\n  }\n\n  renderRecentTimesheets() {\n    const recentlySubmittedTimesheets = this.props.recentlySubmittedTimesheets;\n\n    if (recentlySubmittedTimesheets.length > 0) {\n      return React.createElement(\"ul\", {\n        style: Styles.recentTimesheetsList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, recentlySubmittedTimesheets.map(timesheet => React.createElement(RecentTimesheet, {\n        key: timesheet.timestamp,\n        timesheet: timesheet,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      })));\n    }\n\n    return null;\n  }\n\n  renderSubmitLayout() {\n    const _this$props2 = this.props,\n          userState = _this$props2.userState,\n          saveToDatabase = _this$props2.saveToDatabase,\n          timesheetUploadError = _this$props2.timesheetUploadError,\n          timesheetUploadStart = _this$props2.timesheetUploadStart,\n          timesheetUploading = _this$props2.timesheetUploading;\n    const _this$state2 = this.state,\n          timesheetFile = _this$state2.timesheetFile,\n          hoverRange = _this$state2.hoverRange,\n          selectedDays = _this$state2.selectedDays,\n          timesheetTimestamp = _this$state2.timesheetTimestamp;\n    const daysAreSelected = selectedDays.length > 0;\n    const daysSelectedText = `${moment(selectedDays[0]).format('LL')} – ${moment(selectedDays[6]).format('LL')}`;\n    const modifiers = {\n      hoverRange,\n      selectedRange: daysAreSelected && {\n        from: selectedDays[0],\n        to: selectedDays[6]\n      },\n      hoverRangeStart: hoverRange && hoverRange.from,\n      hoverRangeEnd: hoverRange && hoverRange.to,\n      selectedRangeStart: daysAreSelected && selectedDays[0],\n      selectedRangeEnd: daysAreSelected && selectedDays[6]\n    };\n    return React.createElement(\"div\", {\n      style: Styles.DasboardContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: Styles.RecentlySubmittedContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: Styles.RecentlySubmittedText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, \"Recently Submitted\"), this.renderRecentTimesheets()), React.createElement(\"div\", {\n      style: Styles.SubmitContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \"Submit\"), React.createElement(\"div\", {\n      style: Styles.StepsList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, this.renderFirstStep(daysAreSelected, daysSelectedText), this.renderSecondStep(), timesheetFile && daysAreSelected && React.createElement(\"button\", {\n      type: \"button\",\n      style: Styles.SubmitTimesheetButton,\n      onClick: this.startUploadManually,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, !timesheetUploading && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, \"Submit\"), timesheetUploading && React.createElement(Loader, {\n      type: \"ThreeDots\",\n      color: \"#00BFFF\",\n      height: 40,\n      width: 80,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      style: Styles.CalendarContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, React.createElement(DayPicker, {\n      selectedDays: selectedDays,\n      showWeekNumbers: true,\n      showOutsideDays: true,\n      modifiers: modifiers,\n      onDayClick: this.handleDayChange,\n      onDayMouseEnter: this.handleDayEnter,\n      onDayMouseLeave: this.handleDayLeave,\n      onWeekClick: this.handleWeekClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    })), selectedDays.length > 0 && React.createElement(FileUploader, {\n      ref: instance => {\n        this.fileUploader = instance;\n      },\n      onChange: event => this.setState({\n        timesheetFile: event.target.files[0],\n        timesheetTimestamp: Date.now()\n      }),\n      accept: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" // only .xlsx\n      ,\n      storageRef: firebase.storage().ref(`timesheets/${userState.id}`),\n      filename: timesheetTimestamp,\n      onUploadStart: timesheetUploadStart,\n      onUploadError: timesheetUploadError,\n      onUploadSuccess: (filename, task) => {\n        this.clearFields();\n        const timesheetTimePeriod = daysSelectedText;\n        const filepath = task.snapshot.metadata.fullPath;\n        const timestamp = task.snapshot.metadata.name.split('.')[0];\n        const id = timestamp;\n        const userId = userState.id;\n        const action = {\n          timesheetTimePeriod,\n          filepath,\n          id,\n          userId,\n          timestamp\n        };\n        return saveToDatabase(action);\n      },\n      onProgress: this.handleProgress,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    })));\n  }\n\n  renderAdminSidePanel() {\n    return React.createElement(\"div\", {\n      style: Styles.adminSidePanel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      style: Styles.adminSidePanelButton,\n      onClick: () => this.setState({\n        currentAdminLayout: AdminLayouts.HOME\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, \"Home\"), React.createElement(\"button\", {\n      type: \"button\",\n      style: Styles.adminSidePanelButton,\n      onClick: () => this.setState({\n        currentAdminLayout: AdminLayouts.TIMESHEETS\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, \"View Timesheets\"), React.createElement(\"button\", {\n      type: \"button\",\n      style: Styles.adminSidePanelButton,\n      onClick: () => this.setState({\n        currentAdminLayout: AdminLayouts.EMPLOYEES\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, \"View Employees\"), React.createElement(\"button\", {\n      type: \"button\",\n      style: Styles.adminSidePanelButton,\n      onClick: () => this.setState({\n        currentAdminLayout: AdminLayouts.SETTINGS\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, \"Settings\"));\n  }\n\n  renderAdminHomeLayout() {\n    return React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }, \"Home\");\n  }\n\n  renderAdminEmployeesTableData() {\n    const employees = this.props.employees;\n    if (!employees) return null;\n    return employees.map(employee => React.createElement(\"tr\", {\n      key: employee.uid,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, employee.email), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, employee.name)));\n  }\n\n  renderAddEmployeeLayout() {\n    const isLoading = this.props.isLoading;\n    const _this$state3 = this.state,\n          email = _this$state3.email,\n          password = _this$state3.password,\n          name = _this$state3.name;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"NameContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"NameLabel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }, \"Name:\"), React.createElement(\"input\", {\n      className: \"NameInput\",\n      type: \"text\",\n      value: name,\n      onChange: this.handleNameChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"EmailContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"EmailLabel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366\n      },\n      __self: this\n    }, \"Email:\"), React.createElement(\"input\", {\n      className: \"EmailInput\",\n      type: \"text\",\n      value: email,\n      onChange: this.handleEmailChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"PasswordContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"PasswordLabel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370\n      },\n      __self: this\n    }, \"Password:\"), React.createElement(\"input\", {\n      className: \"PasswordInput\",\n      value: password,\n      onChange: this.handlePassChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      className: \"SubmitButton\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }, !isLoading && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374\n      },\n      __self: this\n    }, \"Sign Up\"), isLoading && React.createElement(Loader, {\n      type: \"ThreeDots\",\n      color: \"#00BFFF\",\n      height: 40,\n      width: 80,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375\n      },\n      __self: this\n    }))));\n  }\n\n  renderAdminEmployeesLayout() {\n    const shouldShowAddEmployee = this.state.shouldShowAddEmployee;\n    return React.createElement(\"div\", {\n      style: Styles.adminEmployeesLayoutContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      style: Styles.employeesTable,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      style: Styles.employeesTableCell,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }, \"Email address\"), React.createElement(\"td\", {\n      style: Styles.employeesTableCell,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }, \"Name\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }, this.renderAdminEmployeesTableData())), React.createElement(\"button\", {\n      style: Styles.addEmployeeButton,\n      type: \"button\",\n      onClick: () => this.addEmployeeClicked(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, \"Add Employee\"), shouldShowAddEmployee && this.renderAddEmployeeLayout());\n  }\n\n  renderAdminSettingsLayout() {\n    return React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405\n      },\n      __self: this\n    }, \"Settings\");\n  }\n\n  renderAdminTimesheets() {\n    const _this$state4 = this.state,\n          filtersApplied = _this$state4.filtersApplied,\n          employeeIdSubmissionTimePeriodsMap = _this$state4.employeeIdSubmissionTimePeriodsMap;\n    const employees = this.props.employees;\n    return employees.filter(employee => {\n      // check for time period filter\n      if (!filtersApplied || filtersApplied.length <= 0) return true;\n\n      for (let i = 0; i < filtersApplied.length; i += 1) {\n        if (employeeIdSubmissionTimePeriodsMap[employee.uid] && employeeIdSubmissionTimePeriodsMap[employee.uid].includes(filtersApplied[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    }).map(employee => React.createElement(AdminTimesheetTile, {\n      handleEmployeeIdSubmissionTimePeriodsMap: this.handleEmployeeIdSubmissionTimePeriodsMap,\n      handleAddSubmissionTimePeriods: this.handleAddSubmissionTimePeriods,\n      key: employee.uid,\n      employee: employee,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421\n      },\n      __self: this\n    }));\n  }\n\n  renderFilterAdminTimesheets() {\n    const _this$state5 = this.state,\n          submissionTimePeriods = _this$state5.submissionTimePeriods,\n          filtersApplied = _this$state5.filtersApplied;\n    return React.createElement(\"div\", {\n      style: Styles.submittalDateFilterContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: Styles.filterContainerHeader,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428\n      },\n      __self: this\n    }, \"Filter employees by submittal date:\"), React.createElement(\"div\", {\n      style: Styles.filtersList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429\n      },\n      __self: this\n    }, [...submissionTimePeriods].map(timePeriod => {\n      const isChecked = filtersApplied.includes(timePeriod);\n      return React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        style: Styles.filtersCheckbox,\n        checked: isChecked,\n        type: \"checkbox\",\n        value: timePeriod,\n        onChange: event => this.handleFilterPressed(event),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      }), timePeriod, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435\n        },\n        __self: this\n      }));\n    })));\n  }\n\n  renderSearchTextField() {\n    return React.createElement(\"input\", {\n      type: \"text\",\n      style: Styles.searchTextField,\n      placeholder: \"Search by employee...\",\n      onChange: () => this.searchTextFieldChanged(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445\n      },\n      __self: this\n    });\n  }\n\n  renderAdminTimesheetsLayout() {\n    return React.createElement(\"div\", {\n      style: Styles.adminEmployeesLayoutContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: Styles.timesheetHeader,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452\n      },\n      __self: this\n    }, \"Timesheets\"), React.createElement(\"div\", {\n      style: Styles.rowFlex,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453\n      },\n      __self: this\n    }, this.renderSearchTextField(), this.renderFilterAdminTimesheets()), React.createElement(\"div\", {\n      style: Styles.separatorLine,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: Styles.adminTimesheetsContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458\n      },\n      __self: this\n    }, this.renderAdminTimesheets()));\n  }\n\n  renderAdminContent() {\n    const currentAdminLayout = this.state.currentAdminLayout;\n\n    if (currentAdminLayout === AdminLayouts.HOME) {\n      return this.renderAdminHomeLayout();\n    }\n\n    if (currentAdminLayout === AdminLayouts.TIMESHEETS) {\n      return this.renderAdminTimesheetsLayout();\n    }\n\n    if (currentAdminLayout === AdminLayouts.EMPLOYEES) {\n      return this.renderAdminEmployeesLayout();\n    }\n\n    if (currentAdminLayout === AdminLayouts.SETTINGS) {\n      return this.renderAdminSettingsLayout();\n    }\n\n    return null;\n  }\n\n  renderAdminLayout() {\n    return React.createElement(\"div\", {\n      style: Styles.DasboardContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484\n      },\n      __self: this\n    }, this.renderAdminSidePanel(), this.renderAdminContent());\n  }\n\n  render() {\n    const isAdmin = this.props.isAdmin;\n\n    if (!isAdmin) {\n      return this.renderSubmitLayout();\n    }\n\n    if (isAdmin) {\n      return this.renderAdminLayout();\n    }\n\n    return null;\n  }\n\n}\n\nDashboardLayout.propTypes = {\n  recentlySubmittedTimesheets: PropTypes.array.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n  setSignUpError: PropTypes.func.isRequired,\n  signUpWorker: PropTypes.func.isRequired,\n  employees: PropTypes.array.isRequired,\n  userState: PropTypes.object.isRequired,\n  isAdmin: PropTypes.bool.isRequired,\n  setTimesheetFileError: PropTypes.func.isRequired,\n  saveToDatabase: PropTypes.func.isRequired,\n  timesheetUploadError: PropTypes.func.isRequired,\n  timesheetUploadStart: PropTypes.func.isRequired,\n  timesheetUploading: PropTypes.bool.isRequired\n};\nexport default DashboardLayout;","map":{"version":3,"sources":["/Users/joshkardos/Desktop/JTKStaffing/src/Containers/Dashboard/DashboardLayout.js"],"names":["React","Component","PropTypes","moment","FileUploader","Generator","DayPicker","Loader","firebase","getWeekDays","getWeekRange","RecentTimesheet","AdminTimesheetTile","redX","greenCheck","Styles","validateEmail","AdminLayouts","HOME","TIMESHEETS","EMPLOYEES","SETTINGS","DashboardLayout","constructor","props","handleFilterPressed","event","filtersApplied","state","timePeriod","target","value","includes","setState","filter","handleEmployeeIdSubmissionTimePeriodsMap","userId","timePeriodArr","employeeIdSubmissionTimePeriodsMap","map","handleAddSubmissionTimePeriods","timePeriodsArr","submissionTimePeriods","timePeriodSet","Set","forEach","item","add","startUploadManually","setTimesheetFileError","timesheetFile","navigator","onLine","payload","fileUploader","startUpload","handleDayChange","date","selectedDays","from","handleDayEnter","hoverRange","handleDayLeave","handleWeekClick","weekNumber","days","handleNameChange","evt","name","handleEmailChange","email","handlePassChange","password","searchTextFieldChanged","adminTimesheetsSearchText","handleSubmit","signUpWorker","setSignUpError","preventDefault","replace","action","timesheetTimestamp","currentAdminLayout","shouldShowAddEmployee","clearFields","addEmployeeClicked","generate","length","renderFileName","FileName","renderFirstStep","daysAreSelected","daysSelectedText","StepRow","renderSecondStep","toggleHover","renderRecentTimesheets","recentlySubmittedTimesheets","recentTimesheetsList","timesheet","timestamp","renderSubmitLayout","userState","saveToDatabase","timesheetUploadError","timesheetUploadStart","timesheetUploading","format","modifiers","selectedRange","to","hoverRangeStart","hoverRangeEnd","selectedRangeStart","selectedRangeEnd","DasboardContainer","RecentlySubmittedContainer","RecentlySubmittedText","SubmitContainer","StepsList","SubmitTimesheetButton","CalendarContainer","instance","files","Date","now","storage","ref","id","filename","task","timesheetTimePeriod","filepath","snapshot","metadata","fullPath","split","handleProgress","renderAdminSidePanel","adminSidePanel","adminSidePanelButton","renderAdminHomeLayout","renderAdminEmployeesTableData","employees","employee","uid","renderAddEmployeeLayout","isLoading","renderAdminEmployeesLayout","adminEmployeesLayoutContainer","employeesTable","employeesTableCell","addEmployeeButton","renderAdminSettingsLayout","renderAdminTimesheets","i","renderFilterAdminTimesheets","submittalDateFilterContainer","filterContainerHeader","filtersList","isChecked","filtersCheckbox","renderSearchTextField","searchTextField","renderAdminTimesheetsLayout","timesheetHeader","rowFlex","separatorLine","adminTimesheetsContainer","renderAdminContent","renderAdminLayout","render","isAdmin","propTypes","array","isRequired","bool","func","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport moment from 'moment'\nimport FileUploader from 'react-firebase-file-uploader'\nimport Generator from 'generate-password'\n// import Calendar from 'react-calendar' // https://www.npmjs.com/package/react-calendar\n// import DatePicker from 'react-datepicker'; // https://www.npmjs.com/package/react-datepicker\n// import 'react-datepicker/dist/react-datepicker.css';\n// import ReactDataSheet from 'react-datasheet';\n// // Be sure to include styles at some point, probably during your bootstrapping\n// import 'react-datasheet/lib/react-datasheet.css'; // https://github.com/nadbm/react-datasheet\n// import { FilePicker } from 'react-file-picker'\nimport DayPicker from 'react-day-picker' // https://react-day-picker.js.org/examples/selected-week\nimport Loader from 'react-loader-spinner'\nimport firebase from '../../Firebase/index'\nimport 'react-day-picker/lib/style.css'\nimport { getWeekDays, getWeekRange } from '../../helpers/CalendarHelpers'\nimport RecentTimesheet from './Worker/RecentTimesheet/RecentTimesheet'\nimport AdminTimesheetTile from './Admin/AdminTimesheetTile/AdminTimesheetTile'\nimport redX from '../../redX.png'\nimport greenCheck from '../../greenCheck.jpg'\nimport Styles from './DashboardLayoutStyles'\nimport { validateEmail } from '../../helpers/UserHelpers'\n\nconst AdminLayouts = {\n  HOME: 'HOME',\n  TIMESHEETS: 'TIMESHEETS',\n  EMPLOYEES: 'EMPLOYEES',\n  SETTINGS: 'SETTINGS'\n}\n\nclass DashboardLayout extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      timesheetTimestamp: null,\n      timesheetFile: null,\n      hoverRange: null,\n      selectedDays: [],\n      currentAdminLayout: AdminLayouts.TIMESHEETS,\n\n      // Add employee state\n      shouldShowAddEmployee: false,\n      email: '',\n      password: '',\n      name: '',\n\n      // admin view\n      filtersApplied: [],\n      submissionTimePeriods: new Set(), // 'September 2, 2019 - September 8, 2019'\n      employeeIdSubmissionTimePeriodsMap: {} // { 12345678 : 'September 2, 2019 - September 8, 2019', 987654321 : 'September 2, 2019 - September 8, 2019' }\n    }\n    this.fileUploader = null\n  }\n\n  handleFilterPressed = (event) => {\n    const { filtersApplied } = this.state\n    const timePeriod = event.target.value\n    if (filtersApplied.includes(timePeriod)) {\n      // remove\n      this.setState({ filtersApplied: filtersApplied.filter(filter => filter !== timePeriod) })\n    } else {\n      // add\n      this.setState({ filtersApplied: [...filtersApplied, timePeriod] })\n    }\n  }\n\n  handleEmployeeIdSubmissionTimePeriodsMap = (userId, timePeriodArr) => {\n    const { employeeIdSubmissionTimePeriodsMap } = this.state\n    const map = { ...employeeIdSubmissionTimePeriodsMap }\n    map[userId] = timePeriodArr\n    this.setState({\n      employeeIdSubmissionTimePeriodsMap: map\n    })\n  }\n\n  handleAddSubmissionTimePeriods = timePeriodsArr => {\n    const { submissionTimePeriods } = this.state\n    const timePeriodSet = new Set(submissionTimePeriods)\n    timePeriodsArr.forEach(item => timePeriodSet.add(item))\n    this.setState({\n      submissionTimePeriods: timePeriodSet\n    })\n  }\n\n  startUploadManually = () => {\n    const { setTimesheetFileError } = this.props\n    const { timesheetFile } = this.state;\n\n    if (!navigator.onLine) {\n      setTimesheetFileError({ payload: 'Check internet connection...' })\n      return\n    }\n    this.fileUploader.startUpload(timesheetFile)\n  }\n\n  handleDayChange = date => {\n    this.setState({\n      selectedDays: getWeekDays(getWeekRange(date).from),\n    })\n  }\n\n  handleDayEnter = date => {\n    this.setState({\n      hoverRange: getWeekRange(date),\n    })\n  }\n\n  handleDayLeave = () => {\n    this.setState({\n      hoverRange: null // cahnge this\n    })\n  }\n\n  handleWeekClick = (weekNumber, days) => {\n    this.setState({\n      selectedDays: days,\n    })\n  }\n\n  handleNameChange = (evt) => {\n    this.setState({\n      name: evt.target.value\n    })\n  }\n\n  handleEmailChange = (evt) => {\n    this.setState({\n      email: evt.target.value\n    })\n  }\n\n  handlePassChange = (evt) => {\n    this.setState({\n      password: evt.target.value\n    })\n  }\n\n  searchTextFieldChanged = (evt) => {\n    this.setState({ adminTimesheetsSearchText: evt.target.value })\n  }\n\n  handleSubmit = (evt) => {\n    const { name, email, password } = this.state\n    const { signUpWorker, setSignUpError } = this.props\n    evt.preventDefault()\n\n    if (!name.replace(/\\s+/g, '')) {\n      const action = {\n        payload: 'Name is required'\n      }\n      return setSignUpError(action)\n    }\n\n    if (!email.replace(/\\s+/g, '')) {\n      const action = {\n        payload: 'Email is required'\n      }\n      return setSignUpError(action)\n    }\n\n    if (!password.replace(/\\s+/g, '')) {\n      const action = {\n        payload: 'Password is required'\n      }\n      return setSignUpError(action)\n    }\n\n    if (!validateEmail(email)) {\n      const action = {\n        payload: 'Invalid email'\n      }\n      return setSignUpError(action)\n    }\n    const action = {\n      name,\n      email,\n      password\n    }\n    return signUpWorker(action)\n  }\n\n  clearFields() {\n    this.setState({ timesheetFile: null, selectedDays: [], hoverRange: null })\n  }\n\n  addEmployeeClicked() {\n    // const { addEmployeeUnderAdmin } = this.props\n    this.setState({ shouldShowAddEmployee: true, password: Generator.generate({ length: 10 }) })\n    // return addEmployeeUnderAdmin\n  }\n\n  renderFileName() {\n    const { timesheetFile } = this.state\n    return (\n      <p style={Styles.FileName}>{timesheetFile.name}</p>\n    )\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  renderFirstStep(daysAreSelected, daysSelectedText) {\n    if (daysAreSelected) {\n      return (\n        <div style={Styles.StepRow}>\n          <h3>1. {daysSelectedText}</h3>\n          <img src={greenCheck} style={Styles.redX} alt=\"redX\" />\n        </div>\n      )\n    }\n    return (\n      <div style={Styles.StepRow}>\n        <h3>1. Select your time period</h3>\n        <img src={redX} style={Styles.redX} alt=\"redX\" />\n      </div>\n    )\n  }\n\n  renderSecondStep() {\n    const { timesheetFile } = this.state\n    if (timesheetFile) {\n      return (\n        <div style={Styles.StepRow}>\n          <h3>2. {timesheetFile.name}</h3>\n          <img src={greenCheck} style={Styles.redX} alt=\"redX\" />\n        </div>\n      )\n    }\n    return (\n      <div style={Styles.StepRow} onMouseEnter={this.toggleHover}>\n        <h3>2. Upload excel file (xlsx)</h3>\n        <img src={redX} style={Styles.redX} alt=\"redX\" />\n      </div>\n    )\n  }\n\n  renderRecentTimesheets() {\n    const { recentlySubmittedTimesheets } = this.props\n    if (recentlySubmittedTimesheets.length > 0) {\n      return <ul style={Styles.recentTimesheetsList}>\n        { recentlySubmittedTimesheets.map(timesheet => <RecentTimesheet key={timesheet.timestamp} timesheet={timesheet} />) }\n      </ul>\n    }\n    return null\n  }\n\n  renderSubmitLayout() {\n    const { userState, saveToDatabase, timesheetUploadError, timesheetUploadStart, timesheetUploading } = this.props\n    const { timesheetFile, hoverRange, selectedDays, timesheetTimestamp } = this.state\n\n    const daysAreSelected = selectedDays.length > 0;\n    const daysSelectedText = `${moment(selectedDays[0]).format('LL')} – ${moment(selectedDays[6]).format('LL')}`\n    const modifiers = {\n      hoverRange,\n      selectedRange: daysAreSelected && {\n        from: selectedDays[0],\n        to: selectedDays[6],\n      },\n      hoverRangeStart: hoverRange && hoverRange.from,\n      hoverRangeEnd: hoverRange && hoverRange.to,\n      selectedRangeStart: daysAreSelected && selectedDays[0],\n      selectedRangeEnd: daysAreSelected && selectedDays[6],\n    }\n    return (\n      <div style={Styles.DasboardContainer}>\n        <div style={Styles.RecentlySubmittedContainer}>\n          <p style={Styles.RecentlySubmittedText}>Recently Submitted</p>\n          {this.renderRecentTimesheets()}\n        </div>\n        <div style={Styles.SubmitContainer}>\n          <h2>Submit</h2>\n          <div style={Styles.StepsList}>\n            {/* FIRST STEP */ }\n            {this.renderFirstStep(daysAreSelected, daysSelectedText)}\n            {/* SECOND STEP */}\n            {this.renderSecondStep()}\n            {/* SUBMIT BUTTON */}\n            { timesheetFile && daysAreSelected &&\n              <button type=\"button\" style={Styles.SubmitTimesheetButton} onClick={this.startUploadManually}>\n                { !timesheetUploading && <p>Submit</p> }\n                { timesheetUploading && <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={40} width={80} /> }\n              </button> }\n          </div>\n          <div style={Styles.CalendarContainer}>\n            <DayPicker\n              selectedDays={selectedDays}\n              showWeekNumbers\n              showOutsideDays\n              modifiers={modifiers}\n              onDayClick={this.handleDayChange}\n              onDayMouseEnter={this.handleDayEnter}\n              onDayMouseLeave={this.handleDayLeave}\n              onWeekClick={this.handleWeekClick}\n            />\n          </div>\n          { selectedDays.length > 0 &&\n            <FileUploader\n              ref={instance => { this.fileUploader = instance }}\n              onChange={event => this.setState({ timesheetFile: event.target.files[0], timesheetTimestamp: Date.now() })}\n              accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" // only .xlsx\n              storageRef={firebase.storage().ref(`timesheets/${userState.id}`)}\n              filename={timesheetTimestamp}\n              onUploadStart={timesheetUploadStart}\n              onUploadError={timesheetUploadError}\n              onUploadSuccess={(filename, task) => {\n                this.clearFields()\n                const timesheetTimePeriod = daysSelectedText\n                const filepath = task.snapshot.metadata.fullPath\n                const timestamp = task.snapshot.metadata.name.split('.')[0]\n                const id = timestamp\n                const userId = userState.id\n                const action = {\n                  timesheetTimePeriod,\n                  filepath,\n                  id,\n                  userId,\n                  timestamp\n                }\n                return saveToDatabase(action)\n              }}\n              onProgress={this.handleProgress}\n            />}\n        </div>\n      </div>\n    )\n  }\n\n  renderAdminSidePanel() {\n    return (\n      <div style={Styles.adminSidePanel}>\n        <button type=\"button\" style={Styles.adminSidePanelButton} onClick={() => this.setState({ currentAdminLayout: AdminLayouts.HOME })}>Home</button>\n        <button type=\"button\" style={Styles.adminSidePanelButton} onClick={() => this.setState({ currentAdminLayout: AdminLayouts.TIMESHEETS })}>View Timesheets</button>\n        <button type=\"button\" style={Styles.adminSidePanelButton} onClick={() => this.setState({ currentAdminLayout: AdminLayouts.EMPLOYEES })}>View Employees</button>\n        <button type=\"button\" style={Styles.adminSidePanelButton} onClick={() => this.setState({ currentAdminLayout: AdminLayouts.SETTINGS })}>Settings</button>\n      </div>\n    )\n  }\n\n  renderAdminHomeLayout() {\n    return (\n      <p>Home</p>\n    )\n  }\n\n  renderAdminEmployeesTableData() {\n    const { employees } = this.props\n    if (!employees) return null\n    return employees.map(employee => (\n      <tr key={employee.uid}>\n        <td>{employee.email}</td>\n        <td>{employee.name}</td>\n      </tr>\n    ))\n  }\n\n  renderAddEmployeeLayout() {\n    const { isLoading } = this.props\n    const { email, password, name } = this.state\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"NameContainer\">\n            <label className=\"NameLabel\">Name:</label>\n            <input className=\"NameInput\" type=\"text\" value={name} onChange={this.handleNameChange} />\n          </div>\n          <div className=\"EmailContainer\">\n            <label className=\"EmailLabel\">Email:</label>\n            <input className=\"EmailInput\" type=\"text\" value={email} onChange={this.handleEmailChange} />\n          </div>\n          <div className=\"PasswordContainer\">\n            <label className=\"PasswordLabel\">Password:</label>\n            <input className=\"PasswordInput\" value={password} onChange={this.handlePassChange} />\n          </div>\n          <button className=\"SubmitButton\" type=\"submit\">\n            { !isLoading && <p>Sign Up</p> }\n            { isLoading && <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={40} width={80} /> }\n          </button>\n        </form>\n      </div>\n    )\n  }\n\n  renderAdminEmployeesLayout() {\n    const { shouldShowAddEmployee } = this.state\n    return (\n      <div style={Styles.adminEmployeesLayoutContainer}>\n        <table style={Styles.employeesTable}>\n          <thead>\n            <tr>\n              <td style={Styles.employeesTableCell}>Email address</td>\n              <td style={Styles.employeesTableCell}>Name</td>\n            </tr>\n          </thead>\n          <tbody>\n            {this.renderAdminEmployeesTableData()}\n          </tbody>\n        </table>\n        <button style={Styles.addEmployeeButton} type=\"button\" onClick={() => this.addEmployeeClicked()}>Add Employee</button>\n        { shouldShowAddEmployee && this.renderAddEmployeeLayout() }\n      </div>\n    )\n  }\n\n  renderAdminSettingsLayout() {\n    return (\n      <p>Settings</p>\n    )\n  }\n\n  renderAdminTimesheets() {\n    const { filtersApplied, employeeIdSubmissionTimePeriodsMap } = this.state\n    const { employees } = this.props\n    return employees.filter(employee => { // check for time period filter\n      if (!filtersApplied || filtersApplied.length <= 0) return true\n      for (let i = 0; i < filtersApplied.length; i += 1) {\n        if (employeeIdSubmissionTimePeriodsMap[employee.uid]\n          && employeeIdSubmissionTimePeriodsMap[employee.uid].includes(filtersApplied[i])) {\n          return true\n        }\n      }\n      return false\n    }).map(employee => <AdminTimesheetTile handleEmployeeIdSubmissionTimePeriodsMap={this.handleEmployeeIdSubmissionTimePeriodsMap} handleAddSubmissionTimePeriods={this.handleAddSubmissionTimePeriods} key={employee.uid} employee={employee} />)\n  }\n\n  renderFilterAdminTimesheets() {\n    const { submissionTimePeriods, filtersApplied } = this.state\n    return (\n      <div style={Styles.submittalDateFilterContainer}>\n        <p style={Styles.filterContainerHeader}>Filter employees by submittal date:</p>\n        <div style={Styles.filtersList}>\n          { [...submissionTimePeriods].map(timePeriod => {\n            const isChecked = filtersApplied.includes(timePeriod)\n            return <label>\n              <input style={Styles.filtersCheckbox} checked={isChecked} type=\"checkbox\" value={timePeriod} onChange={(event) => this.handleFilterPressed(event)} />\n              {timePeriod}\n              <br />\n            </label>\n          }) }\n        </div>\n      </div>\n    )\n  }\n\n  renderSearchTextField() {\n    return (\n      <input type=\"text\" style={Styles.searchTextField} placeholder=\"Search by employee...\" onChange={() => this.searchTextFieldChanged()} />\n    )\n  }\n\n  renderAdminTimesheetsLayout() {\n    return (\n      <div style={Styles.adminEmployeesLayoutContainer}>\n        <p style={Styles.timesheetHeader}>Timesheets</p>\n        <div style={Styles.rowFlex}>\n          {this.renderSearchTextField()}\n          {this.renderFilterAdminTimesheets()}\n        </div>\n        <div style={Styles.separatorLine} />\n        <div style={Styles.adminTimesheetsContainer}>\n          {this.renderAdminTimesheets()}\n        </div>\n      </div>\n    )\n  }\n\n  renderAdminContent() {\n    const { currentAdminLayout } = this.state\n    if (currentAdminLayout === AdminLayouts.HOME) {\n      return this.renderAdminHomeLayout()\n    }\n    if (currentAdminLayout === AdminLayouts.TIMESHEETS) {\n      return this.renderAdminTimesheetsLayout()\n    }\n    if (currentAdminLayout === AdminLayouts.EMPLOYEES) {\n      return this.renderAdminEmployeesLayout()\n    }\n    if (currentAdminLayout === AdminLayouts.SETTINGS) {\n      return this.renderAdminSettingsLayout()\n    }\n    return null\n  }\n\n  renderAdminLayout() {\n    return (\n      <div style={Styles.DasboardContainer}>\n        {this.renderAdminSidePanel()}\n        {this.renderAdminContent()}\n      </div>\n    )\n  }\n\n  render() {\n    const { isAdmin } = this.props\n    if (!isAdmin) {\n      return (\n        this.renderSubmitLayout()\n      )\n    }\n    if (isAdmin) {\n      return (\n        this.renderAdminLayout()\n      )\n    }\n    return null\n  }\n}\n\nDashboardLayout.propTypes = {\n  recentlySubmittedTimesheets: PropTypes.array.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n  setSignUpError: PropTypes.func.isRequired,\n  signUpWorker: PropTypes.func.isRequired,\n  employees: PropTypes.array.isRequired,\n  userState: PropTypes.object.isRequired,\n  isAdmin: PropTypes.bool.isRequired,\n  setTimesheetFileError: PropTypes.func.isRequired,\n  saveToDatabase: PropTypes.func.isRequired,\n  timesheetUploadError: PropTypes.func.isRequired,\n  timesheetUploadStart: PropTypes.func.isRequired,\n  timesheetUploading: PropTypes.bool.isRequired,\n}\n\nexport default DashboardLayout\n"]},"metadata":{},"sourceType":"module"}
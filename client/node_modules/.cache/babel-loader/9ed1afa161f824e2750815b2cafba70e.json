{"ast":null,"code":"import _toConsumableArray from\"/Users/joshkardos/Desktop/JTKStaffing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/joshkardos/Desktop/JTKStaffing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joshkardos/Desktop/JTKStaffing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/joshkardos/Desktop/JTKStaffing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/joshkardos/Desktop/JTKStaffing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/joshkardos/Desktop/JTKStaffing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Styles from'../../DashboardLayoutStyles';import firebase from'../../../../Firebase/index';import AdminTimesheetTileTableCell from'./AdminTimesheetTileTableCell';var AdminTimesheetTile=/*#__PURE__*/function(_Component){_inherits(AdminTimesheetTile,_Component);function AdminTimesheetTile(props){var _this;_classCallCheck(this,AdminTimesheetTile);_this=_possibleConstructorReturn(this,_getPrototypeOf(AdminTimesheetTile).call(this,props));_this.state={timesheets:[],hover:false};return _this;}_createClass(AdminTimesheetTile,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var _this$props=this.props,handleEmployeeIdSubmissionTimePeriodsMap=_this$props.handleEmployeeIdSubmissionTimePeriodsMap,handleAddSubmissionTimePeriods=_this$props.handleAddSubmissionTimePeriods;var employee=this.props.employee;var timesheetArr=[];var timePeriodsArr=[];firebase.database().ref(\"/user-timesheets/\".concat(employee.uid)).once('value').then(function(timesheetSnapshot){if(!timesheetSnapshot.val())return;Object.keys(timesheetSnapshot.val()).map(function(key){timesheetArr=[].concat(_toConsumableArray(timesheetArr),[timesheetSnapshot.val()[key]]);timePeriodsArr=[].concat(_toConsumableArray(timePeriodsArr),[timesheetSnapshot.val()[key].timesheetTimePeriod]);// eslint-disable-next-line no-useless-return\nreturn;});handleAddSubmissionTimePeriods(timePeriodsArr);handleEmployeeIdSubmissionTimePeriodsMap(employee.uid,timePeriodsArr);_this2.setState({timesheets:timesheetArr.reverse()});});}},{key:\"renderTimesheetMessage\",value:function renderTimesheetMessage(){var timesheets=this.state.timesheets;return React.createElement(\"p\",null,timesheets.length);}},{key:\"renderTimesheetsTableData\",value:function renderTimesheetsTableData(){var timesheets=this.state.timesheets;return timesheets.map(function(timesheet){return React.createElement(AdminTimesheetTileTableCell,{key:timesheet.timestamp,timesheet:timesheet});});}},{key:\"renderHoverTable\",value:function renderHoverTable(){var timesheets=this.state.timesheets;if(timesheets.length===0)return null;return React.createElement(\"table\",{style:Styles.timesheetTileTable},React.createElement(\"thead\",{style:Styles.timesheetTileTableBodyHead},React.createElement(\"tr\",null,React.createElement(\"td\",null,\"Time Period\"),React.createElement(\"td\",null,\"Submittal Date\"),React.createElement(\"td\",null))),React.createElement(\"tbody\",{style:Styles.timesheetTileTableBody},this.renderTimesheetsTableData()));}},{key:\"render\",value:function render(){var _this3=this;var employee=this.props.employee;var _this$state=this.state,hover=_this$state.hover,timesheets=_this$state.timesheets;return React.createElement(\"div\",{style:hover?Styles.adminTimesheetTileHover:Styles.adminTimesheetTile,onMouseEnter:function onMouseEnter(){return _this3.setState({hover:true});},onMouseLeave:function onMouseLeave(){return _this3.setState({hover:false});}},React.createElement(\"p\",null,employee.name),React.createElement(\"p\",null,employee.email),this.renderTimesheetMessage(),hover&&this.renderHoverTable(),hover&&timesheets.length===0&&React.createElement(\"p\",null,\"No timesheets uploaded\"));}}]);return AdminTimesheetTile;}(Component);export default AdminTimesheetTile;","map":{"version":3,"sources":["/Users/joshkardos/Desktop/JTKStaffing/src/Containers/Dashboard/Admin/AdminTimesheetTile/AdminTimesheetTile.js"],"names":["React","Component","Styles","firebase","AdminTimesheetTileTableCell","AdminTimesheetTile","props","state","timesheets","hover","handleEmployeeIdSubmissionTimePeriodsMap","handleAddSubmissionTimePeriods","employee","timesheetArr","timePeriodsArr","database","ref","uid","once","then","timesheetSnapshot","val","Object","keys","map","key","timesheetTimePeriod","setState","reverse","length","timesheet","timestamp","timesheetTileTable","timesheetTileTableBodyHead","timesheetTileTableBody","renderTimesheetsTableData","adminTimesheetTileHover","adminTimesheetTile","name","email","renderTimesheetMessage","renderHoverTable"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Styles from '../../DashboardLayoutStyles'\nimport firebase from '../../../../Firebase/index'\nimport AdminTimesheetTileTableCell from './AdminTimesheetTileTableCell'\n\nclass AdminTimesheetTile extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      timesheets: [],\n      hover: false\n    }\n  }\n\n  componentDidMount() {\n    const { handleEmployeeIdSubmissionTimePeriodsMap, handleAddSubmissionTimePeriods } = this.props\n    const { employee } = this.props\n    let timesheetArr = []\n    let timePeriodsArr = []\n    firebase.database().ref(`/user-timesheets/${employee.uid}`).once('value').then(timesheetSnapshot => {\n      if (!timesheetSnapshot.val()) return\n      Object.keys(timesheetSnapshot.val()).map(key => {\n        timesheetArr = [...timesheetArr, timesheetSnapshot.val()[key]]\n        timePeriodsArr = [...timePeriodsArr, timesheetSnapshot.val()[key].timesheetTimePeriod]\n        // eslint-disable-next-line no-useless-return\n        return\n      })\n      handleAddSubmissionTimePeriods(timePeriodsArr)\n      handleEmployeeIdSubmissionTimePeriodsMap(employee.uid, timePeriodsArr)\n      this.setState({ timesheets: timesheetArr.reverse() })\n    })\n  }\n\n  renderTimesheetMessage() {\n    const { timesheets } = this.state\n    return (\n      <p>{timesheets.length}</p>\n    )\n  }\n\n  renderTimesheetsTableData() {\n    const { timesheets } = this.state\n    return timesheets.map(timesheet => <AdminTimesheetTileTableCell key={timesheet.timestamp} timesheet={timesheet} />)\n  }\n\n  renderHoverTable() {\n    const { timesheets } = this.state\n    if (timesheets.length === 0) return null\n    return (\n      <table style={Styles.timesheetTileTable}>\n        <thead style={Styles.timesheetTileTableBodyHead}>\n          <tr>\n            <td>Time Period</td>\n            <td>Submittal Date</td>\n            <td />\n          </tr>\n        </thead>\n        <tbody style={Styles.timesheetTileTableBody}>\n          {this.renderTimesheetsTableData()}\n        </tbody>\n      </table>\n    )\n  }\n\n  render() {\n    const { employee } = this.props\n    const { hover, timesheets } = this.state\n    return (\n      <div\n        style={hover ? Styles.adminTimesheetTileHover : Styles.adminTimesheetTile}\n        onMouseEnter={() => this.setState({ hover: true })}\n        onMouseLeave={() => this.setState({ hover: false })}\n      >\n        <p>{employee.name}</p>\n        <p>{employee.email}</p>\n        {this.renderTimesheetMessage()}\n        { hover && this.renderHoverTable() }\n        { hover && timesheets.length === 0 && <p>No timesheets uploaded</p>}\n      </div>\n    )\n  }\n}\n\nAdminTimesheetTile.propTypes = {\n  employee: PropTypes.object.isRequired,\n  handleEmployeeIdSubmissionTimePeriodsMap: PropTypes.func.isRequired,\n  handleAddSubmissionTimePeriods: PropTypes.func.isRequired\n}\n\nexport default AdminTimesheetTile\n"]},"metadata":{},"sourceType":"module"}
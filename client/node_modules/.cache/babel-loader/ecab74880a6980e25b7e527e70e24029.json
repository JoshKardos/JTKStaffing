{"ast":null,"code":"import _classCallCheck from\"/Users/joshkardos/Desktop/JTKStaffing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joshkardos/Desktop/JTKStaffing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/joshkardos/Desktop/JTKStaffing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/joshkardos/Desktop/JTKStaffing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/joshkardos/Desktop/JTKStaffing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import moment from'moment';import FileUploader from'react-firebase-file-uploader';import Generator from'generate-password';// import Calendar from 'react-calendar' // https://www.npmjs.com/package/react-calendar\n// import DatePicker from 'react-datepicker'; // https://www.npmjs.com/package/react-datepicker\n// import 'react-datepicker/dist/react-datepicker.css';\n// import ReactDataSheet from 'react-datasheet';\n// // Be sure to include styles at some point, probably during your bootstrapping\n// import 'react-datasheet/lib/react-datasheet.css'; // https://github.com/nadbm/react-datasheet\n// import { FilePicker } from 'react-file-picker'\nimport DayPicker from'react-day-picker';// https://react-day-picker.js.org/examples/selected-week\nimport Loader from'react-loader-spinner';import firebase from'../../Firebase/index';import'react-day-picker/lib/style.css';import{getWeekDays,getWeekRange}from'../../helpers/CalendarHelpers';import RecentTimesheet from'./Worker/RecentTimesheet/RecentTimesheet';import AdminTimesheetTile from'./Admin/AdminTimesheetTile/AdminTimesheetTile';import redX from'../../redX.png';import greenCheck from'../../greenCheck.jpg';import Styles from'./DashboardLayoutStyles';import{validateEmail}from'../../helpers/UserHelpers';var AdminLayouts={HOME:'HOME',TIMESHEETS:'TIMESHEETS',EMPLOYEES:'EMPLOYEES',SETTINGS:'SETTINGS'};var DashboardLayout=/*#__PURE__*/function(_Component){_inherits(DashboardLayout,_Component);function DashboardLayout(props){var _this;_classCallCheck(this,DashboardLayout);_this=_possibleConstructorReturn(this,_getPrototypeOf(DashboardLayout).call(this,props));_this.startUploadManually=function(){var setTimesheetFileError=_this.props.setTimesheetFileError;var timesheetFile=_this.state.timesheetFile;if(!navigator.onLine){setTimesheetFileError({payload:'Check internet connection...'});return;}_this.fileUploader.startUpload(timesheetFile);};_this.handleDayChange=function(date){_this.setState({selectedDays:getWeekDays(getWeekRange(date).from)});};_this.handleDayEnter=function(date){_this.setState({hoverRange:getWeekRange(date)});};_this.handleDayLeave=function(){_this.setState({hoverRange:null// cahnge this\n});};_this.handleWeekClick=function(weekNumber,days){_this.setState({selectedDays:days});};_this.handleNameChange=function(evt){_this.setState({name:evt.target.value});};_this.handleEmailChange=function(evt){_this.setState({email:evt.target.value});};_this.handlePassChange=function(evt){_this.setState({password:evt.target.value});};_this.handleSubmit=function(evt){var _this$state=_this.state,name=_this$state.name,email=_this$state.email,password=_this$state.password;var _this$props=_this.props,signUpWorker=_this$props.signUpWorker,setSignUpError=_this$props.setSignUpError;evt.preventDefault();if(!name.replace(/\\s+/g,'')){var _action={payload:'Name is required'};return setSignUpError(_action);}if(!email.replace(/\\s+/g,'')){var _action2={payload:'Email is required'};return setSignUpError(_action2);}if(!password.replace(/\\s+/g,'')){var _action3={payload:'Password is required'};return setSignUpError(_action3);}if(!validateEmail(email)){var _action4={payload:'Invalid email'};return setSignUpError(_action4);}var action={name:name,email:email,password:password};return signUpWorker(action);};_this.state={timesheetTimestamp:null,timesheetFile:null,hoverRange:null,selectedDays:[],currentAdminLayout:AdminLayouts.HOME,// Add employee state\nshouldShowAddEmployee:false,email:'',password:'',name:''};_this.fileUploader=null;return _this;}_createClass(DashboardLayout,[{key:\"clearFields\",value:function clearFields(){this.setState({timesheetFile:null,selectedDays:[],hoverRange:null});}},{key:\"addEmployeeClicked\",value:function addEmployeeClicked(){// const { addEmployeeUnderAdmin } = this.props\nthis.setState({shouldShowAddEmployee:true,password:Generator.generate({length:10})});// return addEmployeeUnderAdmin\n}},{key:\"renderFileName\",value:function renderFileName(){var timesheetFile=this.state.timesheetFile;return React.createElement(\"p\",{style:Styles.FileName},timesheetFile.name);}// eslint-disable-next-line class-methods-use-this\n},{key:\"renderFirstStep\",value:function renderFirstStep(daysAreSelected,daysSelectedText){if(daysAreSelected){return React.createElement(\"div\",{style:Styles.StepRow},React.createElement(\"h3\",null,\"1. \",daysSelectedText),React.createElement(\"img\",{src:greenCheck,style:Styles.redX,alt:\"redX\"}));}return React.createElement(\"div\",{style:Styles.StepRow},React.createElement(\"h3\",null,\"1. Select your time period\"),React.createElement(\"img\",{src:redX,style:Styles.redX,alt:\"redX\"}));}},{key:\"renderSecondStep\",value:function renderSecondStep(){var timesheetFile=this.state.timesheetFile;if(timesheetFile){return React.createElement(\"div\",{style:Styles.StepRow},React.createElement(\"h3\",null,\"2. \",timesheetFile.name),React.createElement(\"img\",{src:greenCheck,style:Styles.redX,alt:\"redX\"}));}return React.createElement(\"div\",{style:Styles.StepRow,onMouseEnter:this.toggleHover},React.createElement(\"h3\",null,\"2. Upload excel file (xlsx)\"),React.createElement(\"img\",{src:redX,style:Styles.redX,alt:\"redX\"}));}},{key:\"renderRecentTimesheets\",value:function renderRecentTimesheets(){var recentlySubmittedTimesheets=this.props.recentlySubmittedTimesheets;if(recentlySubmittedTimesheets.length>0){return React.createElement(\"ul\",{style:Styles.recentTimesheetsList},recentlySubmittedTimesheets.map(function(timesheet){return React.createElement(RecentTimesheet,{timesheet:timesheet});}));}return null;}},{key:\"renderSubmitLayout\",value:function renderSubmitLayout(){var _this2=this;var _this$props2=this.props,userState=_this$props2.userState,saveToDatabase=_this$props2.saveToDatabase,timesheetUploadError=_this$props2.timesheetUploadError,timesheetUploadStart=_this$props2.timesheetUploadStart,timesheetUploading=_this$props2.timesheetUploading;var _this$state2=this.state,timesheetFile=_this$state2.timesheetFile,hoverRange=_this$state2.hoverRange,selectedDays=_this$state2.selectedDays,timesheetTimestamp=_this$state2.timesheetTimestamp;var daysAreSelected=selectedDays.length>0;var daysSelectedText=\"\".concat(moment(selectedDays[0]).format('LL'),\" \\u2013 \").concat(moment(selectedDays[6]).format('LL'));var modifiers={hoverRange:hoverRange,selectedRange:daysAreSelected&&{from:selectedDays[0],to:selectedDays[6]},hoverRangeStart:hoverRange&&hoverRange.from,hoverRangeEnd:hoverRange&&hoverRange.to,selectedRangeStart:daysAreSelected&&selectedDays[0],selectedRangeEnd:daysAreSelected&&selectedDays[6]};return React.createElement(\"div\",{style:Styles.DasboardContainer},React.createElement(\"div\",{style:Styles.RecentlySubmittedContainer},React.createElement(\"p\",{style:Styles.RecentlySubmittedText},\"Recently Submitted\"),this.renderRecentTimesheets()),React.createElement(\"div\",{style:Styles.SubmitContainer},React.createElement(\"h2\",null,\"Submit\"),React.createElement(\"div\",{style:Styles.StepsList},this.renderFirstStep(daysAreSelected,daysSelectedText),this.renderSecondStep(),timesheetFile&&daysAreSelected&&React.createElement(\"button\",{type:\"button\",style:Styles.SubmitTimesheetButton,onClick:this.startUploadManually},!timesheetUploading&&React.createElement(\"p\",null,\"Submit\"),timesheetUploading&&React.createElement(Loader,{type:\"ThreeDots\",color:\"#00BFFF\",height:40,width:80}))),React.createElement(\"div\",{style:Styles.CalendarContainer},React.createElement(DayPicker,{selectedDays:selectedDays,showWeekNumbers:true,showOutsideDays:true,modifiers:modifiers,onDayClick:this.handleDayChange,onDayMouseEnter:this.handleDayEnter,onDayMouseLeave:this.handleDayLeave,onWeekClick:this.handleWeekClick})),selectedDays.length>0&&React.createElement(FileUploader,{ref:function ref(instance){_this2.fileUploader=instance;},onChange:function onChange(event){return _this2.setState({timesheetFile:event.target.files[0],timesheetTimestamp:Date.now()});},accept:\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"// only .xlsx\n,storageRef:firebase.storage().ref(\"timesheets/\".concat(userState.id)),filename:timesheetTimestamp,onUploadStart:timesheetUploadStart,onUploadError:timesheetUploadError,onUploadSuccess:function onUploadSuccess(filename,task){_this2.clearFields();var timesheetTimePeriod=daysSelectedText;var filepath=task.snapshot.metadata.fullPath;var timestamp=task.snapshot.metadata.name.split('.')[0];var id=timestamp;var userId=userState.id;var action={timesheetTimePeriod:timesheetTimePeriod,filepath:filepath,id:id,userId:userId,timestamp:timestamp};return saveToDatabase(action);},onProgress:this.handleProgress})));}},{key:\"renderAdminSidePanel\",value:function renderAdminSidePanel(){var _this3=this;return React.createElement(\"div\",{style:Styles.adminSidePanel},React.createElement(\"button\",{type:\"button\",style:Styles.adminSidePanelButton,onClick:function onClick(){return _this3.setState({currentAdminLayout:AdminLayouts.HOME});}},\"Home\"),React.createElement(\"button\",{type:\"button\",style:Styles.adminSidePanelButton,onClick:function onClick(){return _this3.setState({currentAdminLayout:AdminLayouts.TIMESHEETS});}},\"View Timesheets\"),React.createElement(\"button\",{type:\"button\",style:Styles.adminSidePanelButton,onClick:function onClick(){return _this3.setState({currentAdminLayout:AdminLayouts.EMPLOYEES});}},\"View Employees\"),React.createElement(\"button\",{type:\"button\",style:Styles.adminSidePanelButton,onClick:function onClick(){return _this3.setState({currentAdminLayout:AdminLayouts.SETTINGS});}},\"Settings\"));}},{key:\"renderAdminHomeLayout\",value:function renderAdminHomeLayout(){return React.createElement(\"p\",null,\"Home\");}},{key:\"renderAdminEmployeesTableData\",value:function renderAdminEmployeesTableData(){var employees=this.props.employees;if(!employees)return null;return employees.map(function(employee){return React.createElement(\"tr\",{key:employee.uid},React.createElement(\"td\",null,employee.email),React.createElement(\"td\",null,employee.name));});}},{key:\"renderAddEmployeeLayout\",value:function renderAddEmployeeLayout(){var isLoading=this.props.isLoading;var _this$state3=this.state,email=_this$state3.email,password=_this$state3.password,name=_this$state3.name;return React.createElement(\"div\",null,React.createElement(\"form\",{onSubmit:this.handleSubmit},React.createElement(\"div\",{className:\"NameContainer\"},React.createElement(\"label\",{className:\"NameLabel\"},\"Name:\"),React.createElement(\"input\",{className:\"NameInput\",type:\"text\",value:name,onChange:this.handleNameChange})),React.createElement(\"div\",{className:\"EmailContainer\"},React.createElement(\"label\",{className:\"EmailLabel\"},\"Email:\"),React.createElement(\"input\",{className:\"EmailInput\",type:\"text\",value:email,onChange:this.handleEmailChange})),React.createElement(\"div\",{className:\"PasswordContainer\"},React.createElement(\"label\",{className:\"PasswordLabel\"},\"Password:\"),React.createElement(\"input\",{className:\"PasswordInput\",value:password,onChange:this.handlePassChange})),React.createElement(\"button\",{className:\"SubmitButton\",type:\"submit\"},!isLoading&&React.createElement(\"p\",null,\"Sign Up\"),isLoading&&React.createElement(Loader,{type:\"ThreeDots\",color:\"#00BFFF\",height:40,width:80}))));}},{key:\"renderAdminEmployeesLayout\",value:function renderAdminEmployeesLayout(){var _this4=this;var shouldShowAddEmployee=this.state.shouldShowAddEmployee;return React.createElement(\"div\",{style:Styles.adminEmployeesLayoutContainer},React.createElement(\"table\",{style:Styles.employeesTable},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"td\",{style:Styles.employeesTableCell},\"Email address\"),React.createElement(\"td\",{style:Styles.employeesTableCell},\"Name\"))),React.createElement(\"tbody\",null,this.renderAdminEmployeesTableData())),React.createElement(\"button\",{style:Styles.addEmployeeButton,type:\"button\",onClick:function onClick(){return _this4.addEmployeeClicked();}},\"Add Employee\"),shouldShowAddEmployee&&this.renderAddEmployeeLayout());}},{key:\"renderAdminSettingsLayout\",value:function renderAdminSettingsLayout(){return React.createElement(\"p\",null,\"Settings\");}},{key:\"renderAdminTimesheets\",value:function renderAdminTimesheets(){var employees=this.props.employees;return employees.map(function(employee){return React.createElement(AdminTimesheetTile,{employee:employee});});}},{key:\"renderAdminTimesheetsLayout\",value:function renderAdminTimesheetsLayout(){return React.createElement(\"div\",{style:Styles.adminEmployeesLayoutContainer},React.createElement(\"p\",{style:Styles.timesheetHeader},\" Timesheets\"),React.createElement(\"div\",{style:Styles.adminTimesheetsContainer},this.renderAdminTimesheets()));}},{key:\"renderAdminContent\",value:function renderAdminContent(){var currentAdminLayout=this.state.currentAdminLayout;if(currentAdminLayout===AdminLayouts.HOME){return this.renderAdminHomeLayout();}if(currentAdminLayout===AdminLayouts.TIMESHEETS){return this.renderAdminTimesheetsLayout();}if(currentAdminLayout===AdminLayouts.EMPLOYEES){return this.renderAdminEmployeesLayout();}if(currentAdminLayout===AdminLayouts.SETTINGS){return this.renderAdminSettingsLayout();}return null;}},{key:\"renderAdminLayout\",value:function renderAdminLayout(){return React.createElement(\"div\",{style:Styles.DasboardContainer},this.renderAdminSidePanel(),this.renderAdminContent());}},{key:\"render\",value:function render(){var isAdmin=this.props.isAdmin;if(!isAdmin){return this.renderSubmitLayout();}if(isAdmin){return this.renderAdminLayout();}return null;}}]);return DashboardLayout;}(Component);export default DashboardLayout;","map":{"version":3,"sources":["/Users/joshkardos/Desktop/JTKStaffing/src/Containers/Dashboard/DashboardLayout.js"],"names":["React","Component","moment","FileUploader","Generator","DayPicker","Loader","firebase","getWeekDays","getWeekRange","RecentTimesheet","AdminTimesheetTile","redX","greenCheck","Styles","validateEmail","AdminLayouts","HOME","TIMESHEETS","EMPLOYEES","SETTINGS","DashboardLayout","props","startUploadManually","setTimesheetFileError","timesheetFile","state","navigator","onLine","payload","fileUploader","startUpload","handleDayChange","date","setState","selectedDays","from","handleDayEnter","hoverRange","handleDayLeave","handleWeekClick","weekNumber","days","handleNameChange","evt","name","target","value","handleEmailChange","email","handlePassChange","password","handleSubmit","signUpWorker","setSignUpError","preventDefault","replace","action","timesheetTimestamp","currentAdminLayout","shouldShowAddEmployee","generate","length","FileName","daysAreSelected","daysSelectedText","StepRow","toggleHover","recentlySubmittedTimesheets","recentTimesheetsList","map","timesheet","userState","saveToDatabase","timesheetUploadError","timesheetUploadStart","timesheetUploading","format","modifiers","selectedRange","to","hoverRangeStart","hoverRangeEnd","selectedRangeStart","selectedRangeEnd","DasboardContainer","RecentlySubmittedContainer","RecentlySubmittedText","renderRecentTimesheets","SubmitContainer","StepsList","renderFirstStep","renderSecondStep","SubmitTimesheetButton","CalendarContainer","instance","event","files","Date","now","storage","ref","id","filename","task","clearFields","timesheetTimePeriod","filepath","snapshot","metadata","fullPath","timestamp","split","userId","handleProgress","adminSidePanel","adminSidePanelButton","employees","employee","uid","isLoading","adminEmployeesLayoutContainer","employeesTable","employeesTableCell","renderAdminEmployeesTableData","addEmployeeButton","addEmployeeClicked","renderAddEmployeeLayout","timesheetHeader","adminTimesheetsContainer","renderAdminTimesheets","renderAdminHomeLayout","renderAdminTimesheetsLayout","renderAdminEmployeesLayout","renderAdminSettingsLayout","renderAdminSidePanel","renderAdminContent","isAdmin","renderSubmitLayout","renderAdminLayout"],"mappings":"0xBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,8BAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,mBAAtB,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAOC,CAAAA,SAAP,KAAsB,kBAAtB,CAA0C;AAC1C,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,sBAArB,CACA,MAAO,gCAAP,CACA,OAASC,WAAT,CAAsBC,YAAtB,KAA0C,+BAA1C,CACA,MAAOC,CAAAA,eAAP,KAA4B,0CAA5B,CACA,MAAOC,CAAAA,kBAAP,KAA+B,+CAA/B,CACA,MAAOC,CAAAA,IAAP,KAAiB,gBAAjB,CACA,MAAOC,CAAAA,UAAP,KAAuB,sBAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,OAASC,aAAT,KAA8B,2BAA9B,CAEA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,IAAI,CAAE,MADa,CAEnBC,UAAU,CAAE,YAFO,CAGnBC,SAAS,CAAE,WAHQ,CAInBC,QAAQ,CAAE,UAJS,CAArB,C,GAOMC,CAAAA,e,yEACJ,yBAAYC,KAAZ,CAAmB,iDACjB,iFAAMA,KAAN,GADiB,MAkBnBC,mBAlBmB,CAkBG,UAAM,IAClBC,CAAAA,qBADkB,CACQ,MAAKF,KADb,CAClBE,qBADkB,IAElBC,CAAAA,aAFkB,CAEA,MAAKC,KAFL,CAElBD,aAFkB,CAI1B,GAAI,CAACE,SAAS,CAACC,MAAf,CAAuB,CACrBJ,qBAAqB,CAAC,CAAEK,OAAO,CAAE,8BAAX,CAAD,CAArB,CACA,OACD,CACD,MAAKC,YAAL,CAAkBC,WAAlB,CAA8BN,aAA9B,EACD,CA3BkB,OA6BnBO,eA7BmB,CA6BD,SAAAC,IAAI,CAAI,CACxB,MAAKC,QAAL,CAAc,CACZC,YAAY,CAAE3B,WAAW,CAACC,YAAY,CAACwB,IAAD,CAAZ,CAAmBG,IAApB,CADb,CAAd,EAGD,CAjCkB,OAmCnBC,cAnCmB,CAmCF,SAAAJ,IAAI,CAAI,CACvB,MAAKC,QAAL,CAAc,CACZI,UAAU,CAAE7B,YAAY,CAACwB,IAAD,CADZ,CAAd,EAGD,CAvCkB,OAyCnBM,cAzCmB,CAyCF,UAAM,CACrB,MAAKL,QAAL,CAAc,CACZI,UAAU,CAAE,IAAK;AADL,CAAd,EAGD,CA7CkB,OA+CnBE,eA/CmB,CA+CD,SAACC,UAAD,CAAaC,IAAb,CAAsB,CACtC,MAAKR,QAAL,CAAc,CACZC,YAAY,CAAEO,IADF,CAAd,EAGD,CAnDkB,OAqDnBC,gBArDmB,CAqDA,SAACC,GAAD,CAAS,CAC1B,MAAKV,QAAL,CAAc,CACZW,IAAI,CAAED,GAAG,CAACE,MAAJ,CAAWC,KADL,CAAd,EAGD,CAzDkB,OA2DnBC,iBA3DmB,CA2DC,SAACJ,GAAD,CAAS,CAC3B,MAAKV,QAAL,CAAc,CACZe,KAAK,CAAEL,GAAG,CAACE,MAAJ,CAAWC,KADN,CAAd,EAGD,CA/DkB,OAiEnBG,gBAjEmB,CAiEA,SAACN,GAAD,CAAS,CAC1B,MAAKV,QAAL,CAAc,CACZiB,QAAQ,CAAEP,GAAG,CAACE,MAAJ,CAAWC,KADT,CAAd,EAGD,CArEkB,OAuEnBK,YAvEmB,CAuEJ,SAACR,GAAD,CAAS,iBACY,MAAKlB,KADjB,CACdmB,IADc,aACdA,IADc,CACRI,KADQ,aACRA,KADQ,CACDE,QADC,aACDA,QADC,iBAEmB,MAAK7B,KAFxB,CAEd+B,YAFc,aAEdA,YAFc,CAEAC,cAFA,aAEAA,cAFA,CAGtBV,GAAG,CAACW,cAAJ,GAEA,GAAI,CAACV,IAAI,CAACW,OAAL,CAAa,MAAb,CAAqB,EAArB,CAAL,CAA+B,CAC7B,GAAMC,CAAAA,OAAM,CAAG,CACb5B,OAAO,CAAE,kBADI,CAAf,CAGA,MAAOyB,CAAAA,cAAc,CAACG,OAAD,CAArB,CACD,CAED,GAAI,CAACR,KAAK,CAACO,OAAN,CAAc,MAAd,CAAsB,EAAtB,CAAL,CAAgC,CAC9B,GAAMC,CAAAA,QAAM,CAAG,CACb5B,OAAO,CAAE,mBADI,CAAf,CAGA,MAAOyB,CAAAA,cAAc,CAACG,QAAD,CAArB,CACD,CAED,GAAI,CAACN,QAAQ,CAACK,OAAT,CAAiB,MAAjB,CAAyB,EAAzB,CAAL,CAAmC,CACjC,GAAMC,CAAAA,QAAM,CAAG,CACb5B,OAAO,CAAE,sBADI,CAAf,CAGA,MAAOyB,CAAAA,cAAc,CAACG,QAAD,CAArB,CACD,CAED,GAAI,CAAC1C,aAAa,CAACkC,KAAD,CAAlB,CAA2B,CACzB,GAAMQ,CAAAA,QAAM,CAAG,CACb5B,OAAO,CAAE,eADI,CAAf,CAGA,MAAOyB,CAAAA,cAAc,CAACG,QAAD,CAArB,CACD,CACD,GAAMA,CAAAA,MAAM,CAAG,CACbZ,IAAI,CAAJA,IADa,CAEbI,KAAK,CAALA,KAFa,CAGbE,QAAQ,CAARA,QAHa,CAAf,CAKA,MAAOE,CAAAA,YAAY,CAACI,MAAD,CAAnB,CACD,CA7GkB,CAEjB,MAAK/B,KAAL,CAAa,CACXgC,kBAAkB,CAAE,IADT,CAEXjC,aAAa,CAAE,IAFJ,CAGXa,UAAU,CAAE,IAHD,CAIXH,YAAY,CAAE,EAJH,CAKXwB,kBAAkB,CAAE3C,YAAY,CAACC,IALtB,CAOX;AACA2C,qBAAqB,CAAE,KARZ,CASXX,KAAK,CAAE,EATI,CAUXE,QAAQ,CAAE,EAVC,CAWXN,IAAI,CAAE,EAXK,CAAb,CAaA,MAAKf,YAAL,CAAoB,IAApB,CAfiB,aAgBlB,C,6EA+Fa,CACZ,KAAKI,QAAL,CAAc,CAAET,aAAa,CAAE,IAAjB,CAAuBU,YAAY,CAAE,EAArC,CAAyCG,UAAU,CAAE,IAArD,CAAd,EACD,C,+DAEoB,CACnB;AACA,KAAKJ,QAAL,CAAc,CAAE0B,qBAAqB,CAAE,IAAzB,CAA+BT,QAAQ,CAAE/C,SAAS,CAACyD,QAAV,CAAmB,CAAEC,MAAM,CAAE,EAAV,CAAnB,CAAzC,CAAd,EACA;AACD,C,uDAEgB,IACPrC,CAAAA,aADO,CACW,KAAKC,KADhB,CACPD,aADO,CAEf,MACE,0BAAG,KAAK,CAAEX,MAAM,CAACiD,QAAjB,EAA4BtC,aAAa,CAACoB,IAA1C,CADF,CAGD,CAED;wDACgBmB,e,CAAiBC,gB,CAAkB,CACjD,GAAID,eAAJ,CAAqB,CACnB,MACE,4BAAK,KAAK,CAAElD,MAAM,CAACoD,OAAnB,EACE,oCAAQD,gBAAR,CADF,CAEE,2BAAK,GAAG,CAAEpD,UAAV,CAAsB,KAAK,CAAEC,MAAM,CAACF,IAApC,CAA0C,GAAG,CAAC,MAA9C,EAFF,CADF,CAMD,CACD,MACE,4BAAK,KAAK,CAAEE,MAAM,CAACoD,OAAnB,EACE,2DADF,CAEE,2BAAK,GAAG,CAAEtD,IAAV,CAAgB,KAAK,CAAEE,MAAM,CAACF,IAA9B,CAAoC,GAAG,CAAC,MAAxC,EAFF,CADF,CAMD,C,2DAEkB,IACTa,CAAAA,aADS,CACS,KAAKC,KADd,CACTD,aADS,CAEjB,GAAIA,aAAJ,CAAmB,CACjB,MACE,4BAAK,KAAK,CAAEX,MAAM,CAACoD,OAAnB,EACE,oCAAQzC,aAAa,CAACoB,IAAtB,CADF,CAEE,2BAAK,GAAG,CAAEhC,UAAV,CAAsB,KAAK,CAAEC,MAAM,CAACF,IAApC,CAA0C,GAAG,CAAC,MAA9C,EAFF,CADF,CAMD,CACD,MACE,4BAAK,KAAK,CAAEE,MAAM,CAACoD,OAAnB,CAA4B,YAAY,CAAE,KAAKC,WAA/C,EACE,4DADF,CAEE,2BAAK,GAAG,CAAEvD,IAAV,CAAgB,KAAK,CAAEE,MAAM,CAACF,IAA9B,CAAoC,GAAG,CAAC,MAAxC,EAFF,CADF,CAMD,C,uEAEwB,IACfwD,CAAAA,2BADe,CACiB,KAAK9C,KADtB,CACf8C,2BADe,CAEvB,GAAIA,2BAA2B,CAACN,MAA5B,CAAqC,CAAzC,CAA4C,CAC1C,MAAO,2BAAI,KAAK,CAAEhD,MAAM,CAACuD,oBAAlB,EACHD,2BAA2B,CAACE,GAA5B,CAAgC,SAAAC,SAAS,QAAI,qBAAC,eAAD,EAAiB,SAAS,CAAEA,SAA5B,EAAJ,EAAzC,CADG,CAAP,CAGD,CACD,MAAO,KAAP,CACD,C,+DAEoB,kCACmF,KAAKjD,KADxF,CACXkD,SADW,cACXA,SADW,CACAC,cADA,cACAA,cADA,CACgBC,oBADhB,cACgBA,oBADhB,CACsCC,oBADtC,cACsCA,oBADtC,CAC4DC,kBAD5D,cAC4DA,kBAD5D,kBAEqD,KAAKlD,KAF1D,CAEXD,aAFW,cAEXA,aAFW,CAEIa,UAFJ,cAEIA,UAFJ,CAEgBH,YAFhB,cAEgBA,YAFhB,CAE8BuB,kBAF9B,cAE8BA,kBAF9B,CAInB,GAAMM,CAAAA,eAAe,CAAG7B,YAAY,CAAC2B,MAAb,CAAsB,CAA9C,CACA,GAAMG,CAAAA,gBAAgB,WAAM/D,MAAM,CAACiC,YAAY,CAAC,CAAD,CAAb,CAAN,CAAwB0C,MAAxB,CAA+B,IAA/B,CAAN,oBAAgD3E,MAAM,CAACiC,YAAY,CAAC,CAAD,CAAb,CAAN,CAAwB0C,MAAxB,CAA+B,IAA/B,CAAhD,CAAtB,CACA,GAAMC,CAAAA,SAAS,CAAG,CAChBxC,UAAU,CAAVA,UADgB,CAEhByC,aAAa,CAAEf,eAAe,EAAI,CAChC5B,IAAI,CAAED,YAAY,CAAC,CAAD,CADc,CAEhC6C,EAAE,CAAE7C,YAAY,CAAC,CAAD,CAFgB,CAFlB,CAMhB8C,eAAe,CAAE3C,UAAU,EAAIA,UAAU,CAACF,IAN1B,CAOhB8C,aAAa,CAAE5C,UAAU,EAAIA,UAAU,CAAC0C,EAPxB,CAQhBG,kBAAkB,CAAEnB,eAAe,EAAI7B,YAAY,CAAC,CAAD,CARnC,CAShBiD,gBAAgB,CAAEpB,eAAe,EAAI7B,YAAY,CAAC,CAAD,CATjC,CAAlB,CAWA,MACE,4BAAK,KAAK,CAAErB,MAAM,CAACuE,iBAAnB,EACE,2BAAK,KAAK,CAAEvE,MAAM,CAACwE,0BAAnB,EACE,yBAAG,KAAK,CAAExE,MAAM,CAACyE,qBAAjB,uBADF,CAEG,KAAKC,sBAAL,EAFH,CADF,CAKE,2BAAK,KAAK,CAAE1E,MAAM,CAAC2E,eAAnB,EACE,uCADF,CAEE,2BAAK,KAAK,CAAE3E,MAAM,CAAC4E,SAAnB,EAEG,KAAKC,eAAL,CAAqB3B,eAArB,CAAsCC,gBAAtC,CAFH,CAIG,KAAK2B,gBAAL,EAJH,CAMInE,aAAa,EAAIuC,eAAjB,EACA,8BAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAElD,MAAM,CAAC+E,qBAApC,CAA2D,OAAO,CAAE,KAAKtE,mBAAzE,EACI,CAACqD,kBAAD,EAAuB,sCAD3B,CAEIA,kBAAkB,EAAI,oBAAC,MAAD,EAAQ,IAAI,CAAC,WAAb,CAAyB,KAAK,CAAC,SAA/B,CAAyC,MAAM,CAAE,EAAjD,CAAqD,KAAK,CAAE,EAA5D,EAF1B,CAPJ,CAFF,CAcE,2BAAK,KAAK,CAAE9D,MAAM,CAACgF,iBAAnB,EACE,oBAAC,SAAD,EACE,YAAY,CAAE3D,YADhB,CAEE,eAAe,KAFjB,CAGE,eAAe,KAHjB,CAIE,SAAS,CAAE2C,SAJb,CAKE,UAAU,CAAE,KAAK9C,eALnB,CAME,eAAe,CAAE,KAAKK,cANxB,CAOE,eAAe,CAAE,KAAKE,cAPxB,CAQE,WAAW,CAAE,KAAKC,eARpB,EADF,CAdF,CA0BIL,YAAY,CAAC2B,MAAb,CAAsB,CAAtB,EACA,oBAAC,YAAD,EACE,GAAG,CAAE,aAAAiC,QAAQ,CAAI,CAAE,MAAI,CAACjE,YAAL,CAAoBiE,QAApB,CAA8B,CADnD,CAEE,QAAQ,CAAE,kBAAAC,KAAK,QAAI,CAAA,MAAI,CAAC9D,QAAL,CAAc,CAAET,aAAa,CAAEuE,KAAK,CAAClD,MAAN,CAAamD,KAAb,CAAmB,CAAnB,CAAjB,CAAwCvC,kBAAkB,CAAEwC,IAAI,CAACC,GAAL,EAA5D,CAAd,CAAJ,EAFjB,CAGE,MAAM,CAAC,mEAAoE;AAH7E,CAIE,UAAU,CAAE5F,QAAQ,CAAC6F,OAAT,GAAmBC,GAAnB,sBAAqC7B,SAAS,CAAC8B,EAA/C,EAJd,CAKE,QAAQ,CAAE5C,kBALZ,CAME,aAAa,CAAEiB,oBANjB,CAOE,aAAa,CAAED,oBAPjB,CAQE,eAAe,CAAE,yBAAC6B,QAAD,CAAWC,IAAX,CAAoB,CACnC,MAAI,CAACC,WAAL,GACA,GAAMC,CAAAA,mBAAmB,CAAGzC,gBAA5B,CACA,GAAM0C,CAAAA,QAAQ,CAAGH,IAAI,CAACI,QAAL,CAAcC,QAAd,CAAuBC,QAAxC,CACA,GAAMC,CAAAA,SAAS,CAAGP,IAAI,CAACI,QAAL,CAAcC,QAAd,CAAuBhE,IAAvB,CAA4BmE,KAA5B,CAAkC,GAAlC,EAAuC,CAAvC,CAAlB,CACA,GAAMV,CAAAA,EAAE,CAAGS,SAAX,CACA,GAAME,CAAAA,MAAM,CAAGzC,SAAS,CAAC8B,EAAzB,CACA,GAAM7C,CAAAA,MAAM,CAAG,CACbiD,mBAAmB,CAAnBA,mBADa,CAEbC,QAAQ,CAARA,QAFa,CAGbL,EAAE,CAAFA,EAHa,CAIbW,MAAM,CAANA,MAJa,CAKbF,SAAS,CAATA,SALa,CAAf,CAOA,MAAOtC,CAAAA,cAAc,CAAChB,MAAD,CAArB,CACD,CAvBH,CAwBE,UAAU,CAAE,KAAKyD,cAxBnB,EA3BJ,CALF,CADF,CA8DD,C,mEAEsB,iBACrB,MACE,4BAAK,KAAK,CAAEpG,MAAM,CAACqG,cAAnB,EACE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAErG,MAAM,CAACsG,oBAApC,CAA0D,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAClF,QAAL,CAAc,CAAEyB,kBAAkB,CAAE3C,YAAY,CAACC,IAAnC,CAAd,CAAN,EAAnE,SADF,CAEE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAEH,MAAM,CAACsG,oBAApC,CAA0D,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAClF,QAAL,CAAc,CAAEyB,kBAAkB,CAAE3C,YAAY,CAACE,UAAnC,CAAd,CAAN,EAAnE,oBAFF,CAGE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAEJ,MAAM,CAACsG,oBAApC,CAA0D,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAClF,QAAL,CAAc,CAAEyB,kBAAkB,CAAE3C,YAAY,CAACG,SAAnC,CAAd,CAAN,EAAnE,mBAHF,CAIE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAEL,MAAM,CAACsG,oBAApC,CAA0D,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAClF,QAAL,CAAc,CAAEyB,kBAAkB,CAAE3C,YAAY,CAACI,QAAnC,CAAd,CAAN,EAAnE,aAJF,CADF,CAQD,C,qEAEuB,CACtB,MACE,qCADF,CAGD,C,qFAE+B,IACtBiG,CAAAA,SADsB,CACR,KAAK/F,KADG,CACtB+F,SADsB,CAE9B,GAAI,CAACA,SAAL,CAAgB,MAAO,KAAP,CAChB,MAAOA,CAAAA,SAAS,CAAC/C,GAAV,CAAc,SAAAgD,QAAQ,QAC3B,2BAAI,GAAG,CAAEA,QAAQ,CAACC,GAAlB,EACE,8BAAKD,QAAQ,CAACrE,KAAd,CADF,CAEE,8BAAKqE,QAAQ,CAACzE,IAAd,CAFF,CAD2B,EAAtB,CAAP,CAMD,C,yEAEyB,IAChB2E,CAAAA,SADgB,CACF,KAAKlG,KADH,CAChBkG,SADgB,kBAEU,KAAK9F,KAFf,CAEhBuB,KAFgB,cAEhBA,KAFgB,CAETE,QAFS,cAETA,QAFS,CAECN,IAFD,cAECA,IAFD,CAGxB,MACE,gCACE,4BAAM,QAAQ,CAAE,KAAKO,YAArB,EACE,2BAAK,SAAS,CAAC,eAAf,EACE,6BAAO,SAAS,CAAC,WAAjB,UADF,CAEE,6BAAO,SAAS,CAAC,WAAjB,CAA6B,IAAI,CAAC,MAAlC,CAAyC,KAAK,CAAEP,IAAhD,CAAsD,QAAQ,CAAE,KAAKF,gBAArE,EAFF,CADF,CAKE,2BAAK,SAAS,CAAC,gBAAf,EACE,6BAAO,SAAS,CAAC,YAAjB,WADF,CAEE,6BAAO,SAAS,CAAC,YAAjB,CAA8B,IAAI,CAAC,MAAnC,CAA0C,KAAK,CAAEM,KAAjD,CAAwD,QAAQ,CAAE,KAAKD,iBAAvE,EAFF,CALF,CASE,2BAAK,SAAS,CAAC,mBAAf,EACE,6BAAO,SAAS,CAAC,eAAjB,cADF,CAEE,6BAAO,SAAS,CAAC,eAAjB,CAAiC,KAAK,CAAEG,QAAxC,CAAkD,QAAQ,CAAE,KAAKD,gBAAjE,EAFF,CATF,CAaE,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,IAAI,CAAC,QAAtC,EACI,CAACsE,SAAD,EAAc,uCADlB,CAEIA,SAAS,EAAI,oBAAC,MAAD,EAAQ,IAAI,CAAC,WAAb,CAAyB,KAAK,CAAC,SAA/B,CAAyC,MAAM,CAAE,EAAjD,CAAqD,KAAK,CAAE,EAA5D,EAFjB,CAbF,CADF,CADF,CAsBD,C,+EAE4B,oBACnB5D,CAAAA,qBADmB,CACO,KAAKlC,KADZ,CACnBkC,qBADmB,CAE3B,MACE,4BAAK,KAAK,CAAE9C,MAAM,CAAC2G,6BAAnB,EACE,6BAAO,KAAK,CAAE3G,MAAM,CAAC4G,cAArB,EACE,iCACE,8BACE,0BAAI,KAAK,CAAE5G,MAAM,CAAC6G,kBAAlB,kBADF,CAEE,0BAAI,KAAK,CAAE7G,MAAM,CAAC6G,kBAAlB,SAFF,CADF,CADF,CAOE,iCACG,KAAKC,6BAAL,EADH,CAPF,CADF,CAYE,8BAAQ,KAAK,CAAE9G,MAAM,CAAC+G,iBAAtB,CAAyC,IAAI,CAAC,QAA9C,CAAuD,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACC,kBAAL,EAAN,EAAhE,iBAZF,CAaIlE,qBAAqB,EAAI,KAAKmE,uBAAL,EAb7B,CADF,CAiBD,C,6EAE2B,CAC1B,MACE,yCADF,CAGD,C,qEAEuB,IACdV,CAAAA,SADc,CACA,KAAK/F,KADL,CACd+F,SADc,CAEtB,MAAOA,CAAAA,SAAS,CAAC/C,GAAV,CAAc,SAAAgD,QAAQ,QAAI,qBAAC,kBAAD,EAAoB,QAAQ,CAAEA,QAA9B,EAAJ,EAAtB,CAAP,CACD,C,iFAE6B,CAC5B,MACE,4BAAK,KAAK,CAAExG,MAAM,CAAC2G,6BAAnB,EACE,yBAAG,KAAK,CAAE3G,MAAM,CAACkH,eAAjB,gBADF,CAEE,2BAAK,KAAK,CAAElH,MAAM,CAACmH,wBAAnB,EACG,KAAKC,qBAAL,EADH,CAFF,CADF,CAQD,C,+DAEoB,IACXvE,CAAAA,kBADW,CACY,KAAKjC,KADjB,CACXiC,kBADW,CAEnB,GAAIA,kBAAkB,GAAK3C,YAAY,CAACC,IAAxC,CAA8C,CAC5C,MAAO,MAAKkH,qBAAL,EAAP,CACD,CACD,GAAIxE,kBAAkB,GAAK3C,YAAY,CAACE,UAAxC,CAAoD,CAClD,MAAO,MAAKkH,2BAAL,EAAP,CACD,CACD,GAAIzE,kBAAkB,GAAK3C,YAAY,CAACG,SAAxC,CAAmD,CACjD,MAAO,MAAKkH,0BAAL,EAAP,CACD,CACD,GAAI1E,kBAAkB,GAAK3C,YAAY,CAACI,QAAxC,CAAkD,CAChD,MAAO,MAAKkH,yBAAL,EAAP,CACD,CACD,MAAO,KAAP,CACD,C,6DAEmB,CAClB,MACE,4BAAK,KAAK,CAAExH,MAAM,CAACuE,iBAAnB,EACG,KAAKkD,oBAAL,EADH,CAEG,KAAKC,kBAAL,EAFH,CADF,CAMD,C,uCAEQ,IACCC,CAAAA,OADD,CACa,KAAKnH,KADlB,CACCmH,OADD,CAEP,GAAI,CAACA,OAAL,CAAc,CACZ,MACE,MAAKC,kBAAL,EADF,CAGD,CACD,GAAID,OAAJ,CAAa,CACX,MACE,MAAKE,iBAAL,EADF,CAGD,CACD,MAAO,KAAP,CACD,C,6BAzY2B1I,S,EA2Z9B,cAAeoB,CAAAA,eAAf","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport moment from 'moment'\nimport FileUploader from 'react-firebase-file-uploader'\nimport Generator from 'generate-password'\n// import Calendar from 'react-calendar' // https://www.npmjs.com/package/react-calendar\n// import DatePicker from 'react-datepicker'; // https://www.npmjs.com/package/react-datepicker\n// import 'react-datepicker/dist/react-datepicker.css';\n// import ReactDataSheet from 'react-datasheet';\n// // Be sure to include styles at some point, probably during your bootstrapping\n// import 'react-datasheet/lib/react-datasheet.css'; // https://github.com/nadbm/react-datasheet\n// import { FilePicker } from 'react-file-picker'\nimport DayPicker from 'react-day-picker'; // https://react-day-picker.js.org/examples/selected-week\nimport Loader from 'react-loader-spinner'\nimport firebase from '../../Firebase/index'\nimport 'react-day-picker/lib/style.css';\nimport { getWeekDays, getWeekRange } from '../../helpers/CalendarHelpers'\nimport RecentTimesheet from './Worker/RecentTimesheet/RecentTimesheet'\nimport AdminTimesheetTile from './Admin/AdminTimesheetTile/AdminTimesheetTile'\nimport redX from '../../redX.png'\nimport greenCheck from '../../greenCheck.jpg'\nimport Styles from './DashboardLayoutStyles'\nimport { validateEmail } from '../../helpers/UserHelpers'\n\nconst AdminLayouts = {\n  HOME: 'HOME',\n  TIMESHEETS: 'TIMESHEETS',\n  EMPLOYEES: 'EMPLOYEES',\n  SETTINGS: 'SETTINGS'\n}\n\nclass DashboardLayout extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      timesheetTimestamp: null,\n      timesheetFile: null,\n      hoverRange: null,\n      selectedDays: [],\n      currentAdminLayout: AdminLayouts.HOME,\n\n      // Add employee state\n      shouldShowAddEmployee: false,\n      email: '',\n      password: '',\n      name: ''\n    }\n    this.fileUploader = null\n  }\n\n  startUploadManually = () => {\n    const { setTimesheetFileError } = this.props\n    const { timesheetFile } = this.state;\n\n    if (!navigator.onLine) {\n      setTimesheetFileError({ payload: 'Check internet connection...' })\n      return\n    }\n    this.fileUploader.startUpload(timesheetFile)\n  }\n\n  handleDayChange = date => {\n    this.setState({\n      selectedDays: getWeekDays(getWeekRange(date).from),\n    })\n  }\n\n  handleDayEnter = date => {\n    this.setState({\n      hoverRange: getWeekRange(date),\n    })\n  }\n\n  handleDayLeave = () => {\n    this.setState({\n      hoverRange: null // cahnge this\n    })\n  }\n\n  handleWeekClick = (weekNumber, days) => {\n    this.setState({\n      selectedDays: days,\n    })\n  }\n\n  handleNameChange = (evt) => {\n    this.setState({\n      name: evt.target.value\n    })\n  }\n\n  handleEmailChange = (evt) => {\n    this.setState({\n      email: evt.target.value\n    })\n  }\n\n  handlePassChange = (evt) => {\n    this.setState({\n      password: evt.target.value\n    })\n  }\n\n  handleSubmit = (evt) => {\n    const { name, email, password } = this.state\n    const { signUpWorker, setSignUpError } = this.props\n    evt.preventDefault()\n\n    if (!name.replace(/\\s+/g, '')) {\n      const action = {\n        payload: 'Name is required'\n      }\n      return setSignUpError(action)\n    }\n\n    if (!email.replace(/\\s+/g, '')) {\n      const action = {\n        payload: 'Email is required'\n      }\n      return setSignUpError(action)\n    }\n\n    if (!password.replace(/\\s+/g, '')) {\n      const action = {\n        payload: 'Password is required'\n      }\n      return setSignUpError(action)\n    }\n\n    if (!validateEmail(email)) {\n      const action = {\n        payload: 'Invalid email'\n      }\n      return setSignUpError(action)\n    }\n    const action = {\n      name,\n      email,\n      password\n    }\n    return signUpWorker(action)\n  }\n\n  clearFields() {\n    this.setState({ timesheetFile: null, selectedDays: [], hoverRange: null })\n  }\n\n  addEmployeeClicked() {\n    // const { addEmployeeUnderAdmin } = this.props\n    this.setState({ shouldShowAddEmployee: true, password: Generator.generate({ length: 10 }) })\n    // return addEmployeeUnderAdmin\n  }\n\n  renderFileName() {\n    const { timesheetFile } = this.state\n    return (\n      <p style={Styles.FileName}>{timesheetFile.name}</p>\n    )\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  renderFirstStep(daysAreSelected, daysSelectedText) {\n    if (daysAreSelected) {\n      return (\n        <div style={Styles.StepRow}>\n          <h3>1. {daysSelectedText}</h3>\n          <img src={greenCheck} style={Styles.redX} alt=\"redX\" />\n        </div>\n      )\n    }\n    return (\n      <div style={Styles.StepRow}>\n        <h3>1. Select your time period</h3>\n        <img src={redX} style={Styles.redX} alt=\"redX\" />\n      </div>\n    )\n  }\n\n  renderSecondStep() {\n    const { timesheetFile } = this.state\n    if (timesheetFile) {\n      return (\n        <div style={Styles.StepRow}>\n          <h3>2. {timesheetFile.name}</h3>\n          <img src={greenCheck} style={Styles.redX} alt=\"redX\" />\n        </div>\n      )\n    }\n    return (\n      <div style={Styles.StepRow} onMouseEnter={this.toggleHover}>\n        <h3>2. Upload excel file (xlsx)</h3>\n        <img src={redX} style={Styles.redX} alt=\"redX\" />\n      </div>\n    )\n  }\n\n  renderRecentTimesheets() {\n    const { recentlySubmittedTimesheets } = this.props\n    if (recentlySubmittedTimesheets.length > 0) {\n      return <ul style={Styles.recentTimesheetsList}>\n        { recentlySubmittedTimesheets.map(timesheet => <RecentTimesheet timesheet={timesheet} />) }\n      </ul>\n    }\n    return null\n  }\n\n  renderSubmitLayout() {\n    const { userState, saveToDatabase, timesheetUploadError, timesheetUploadStart, timesheetUploading } = this.props\n    const { timesheetFile, hoverRange, selectedDays, timesheetTimestamp } = this.state\n\n    const daysAreSelected = selectedDays.length > 0;\n    const daysSelectedText = `${moment(selectedDays[0]).format('LL')} – ${moment(selectedDays[6]).format('LL')}`\n    const modifiers = {\n      hoverRange,\n      selectedRange: daysAreSelected && {\n        from: selectedDays[0],\n        to: selectedDays[6],\n      },\n      hoverRangeStart: hoverRange && hoverRange.from,\n      hoverRangeEnd: hoverRange && hoverRange.to,\n      selectedRangeStart: daysAreSelected && selectedDays[0],\n      selectedRangeEnd: daysAreSelected && selectedDays[6],\n    };\n    return (\n      <div style={Styles.DasboardContainer}>\n        <div style={Styles.RecentlySubmittedContainer}>\n          <p style={Styles.RecentlySubmittedText}>Recently Submitted</p>\n          {this.renderRecentTimesheets()}\n        </div>\n        <div style={Styles.SubmitContainer}>\n          <h2>Submit</h2>\n          <div style={Styles.StepsList}>\n            {/* FIRST STEP */ }\n            {this.renderFirstStep(daysAreSelected, daysSelectedText)}\n            {/* SECOND STEP */}\n            {this.renderSecondStep()}\n            {/* SUBMIT BUTTON */}\n            { timesheetFile && daysAreSelected &&\n              <button type=\"button\" style={Styles.SubmitTimesheetButton} onClick={this.startUploadManually}>\n                { !timesheetUploading && <p>Submit</p> }\n                { timesheetUploading && <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={40} width={80} /> }\n              </button> }\n          </div>\n          <div style={Styles.CalendarContainer}>\n            <DayPicker\n              selectedDays={selectedDays}\n              showWeekNumbers\n              showOutsideDays\n              modifiers={modifiers}\n              onDayClick={this.handleDayChange}\n              onDayMouseEnter={this.handleDayEnter}\n              onDayMouseLeave={this.handleDayLeave}\n              onWeekClick={this.handleWeekClick}\n            />\n          </div>\n          { selectedDays.length > 0 &&\n            <FileUploader\n              ref={instance => { this.fileUploader = instance }}\n              onChange={event => this.setState({ timesheetFile: event.target.files[0], timesheetTimestamp: Date.now() })}\n              accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" // only .xlsx\n              storageRef={firebase.storage().ref(`timesheets/${userState.id}`)}\n              filename={timesheetTimestamp}\n              onUploadStart={timesheetUploadStart}\n              onUploadError={timesheetUploadError}\n              onUploadSuccess={(filename, task) => {\n                this.clearFields()\n                const timesheetTimePeriod = daysSelectedText\n                const filepath = task.snapshot.metadata.fullPath\n                const timestamp = task.snapshot.metadata.name.split('.')[0]\n                const id = timestamp\n                const userId = userState.id\n                const action = {\n                  timesheetTimePeriod,\n                  filepath,\n                  id,\n                  userId,\n                  timestamp\n                }\n                return saveToDatabase(action)\n              }}\n              onProgress={this.handleProgress}\n            />}\n        </div>\n      </div>\n    )\n  }\n\n  renderAdminSidePanel() {\n    return (\n      <div style={Styles.adminSidePanel}>\n        <button type=\"button\" style={Styles.adminSidePanelButton} onClick={() => this.setState({ currentAdminLayout: AdminLayouts.HOME })}>Home</button>\n        <button type=\"button\" style={Styles.adminSidePanelButton} onClick={() => this.setState({ currentAdminLayout: AdminLayouts.TIMESHEETS })}>View Timesheets</button>\n        <button type=\"button\" style={Styles.adminSidePanelButton} onClick={() => this.setState({ currentAdminLayout: AdminLayouts.EMPLOYEES })}>View Employees</button>\n        <button type=\"button\" style={Styles.adminSidePanelButton} onClick={() => this.setState({ currentAdminLayout: AdminLayouts.SETTINGS })}>Settings</button>\n      </div>\n    )\n  }\n\n  renderAdminHomeLayout() {\n    return (\n      <p>Home</p>\n    )\n  }\n\n  renderAdminEmployeesTableData() {\n    const { employees } = this.props\n    if (!employees) return null\n    return employees.map(employee => (\n      <tr key={employee.uid}>\n        <td>{employee.email}</td>\n        <td>{employee.name}</td>\n      </tr>\n    ))\n  }\n\n  renderAddEmployeeLayout() {\n    const { isLoading } = this.props\n    const { email, password, name } = this.state\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"NameContainer\">\n            <label className=\"NameLabel\">Name:</label>\n            <input className=\"NameInput\" type=\"text\" value={name} onChange={this.handleNameChange} />\n          </div>\n          <div className=\"EmailContainer\">\n            <label className=\"EmailLabel\">Email:</label>\n            <input className=\"EmailInput\" type=\"text\" value={email} onChange={this.handleEmailChange} />\n          </div>\n          <div className=\"PasswordContainer\">\n            <label className=\"PasswordLabel\">Password:</label>\n            <input className=\"PasswordInput\" value={password} onChange={this.handlePassChange} />\n          </div>\n          <button className=\"SubmitButton\" type=\"submit\">\n            { !isLoading && <p>Sign Up</p> }\n            { isLoading && <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={40} width={80} /> }\n          </button>\n        </form>\n      </div>\n    )\n  }\n\n  renderAdminEmployeesLayout() {\n    const { shouldShowAddEmployee } = this.state\n    return (\n      <div style={Styles.adminEmployeesLayoutContainer}>\n        <table style={Styles.employeesTable}>\n          <thead>\n            <tr>\n              <td style={Styles.employeesTableCell}>Email address</td>\n              <td style={Styles.employeesTableCell}>Name</td>\n            </tr>\n          </thead>\n          <tbody>\n            {this.renderAdminEmployeesTableData()}\n          </tbody>\n        </table>\n        <button style={Styles.addEmployeeButton} type=\"button\" onClick={() => this.addEmployeeClicked()}>Add Employee</button>\n        { shouldShowAddEmployee && this.renderAddEmployeeLayout() }\n      </div>\n    )\n  }\n\n  renderAdminSettingsLayout() {\n    return (\n      <p>Settings</p>\n    )\n  }\n\n  renderAdminTimesheets() {\n    const { employees } = this.props\n    return employees.map(employee => <AdminTimesheetTile employee={employee} />)\n  }\n\n  renderAdminTimesheetsLayout() {\n    return (\n      <div style={Styles.adminEmployeesLayoutContainer}>\n        <p style={Styles.timesheetHeader}> Timesheets</p>\n        <div style={Styles.adminTimesheetsContainer}>\n          {this.renderAdminTimesheets()}\n        </div>\n      </div>\n    )\n  }\n\n  renderAdminContent() {\n    const { currentAdminLayout } = this.state\n    if (currentAdminLayout === AdminLayouts.HOME) {\n      return this.renderAdminHomeLayout()\n    }\n    if (currentAdminLayout === AdminLayouts.TIMESHEETS) {\n      return this.renderAdminTimesheetsLayout()\n    }\n    if (currentAdminLayout === AdminLayouts.EMPLOYEES) {\n      return this.renderAdminEmployeesLayout()\n    }\n    if (currentAdminLayout === AdminLayouts.SETTINGS) {\n      return this.renderAdminSettingsLayout()\n    }\n    return null\n  }\n\n  renderAdminLayout() {\n    return (\n      <div style={Styles.DasboardContainer}>\n        {this.renderAdminSidePanel()}\n        {this.renderAdminContent()}\n      </div>\n    )\n  }\n\n  render() {\n    const { isAdmin } = this.props\n    if (!isAdmin) {\n      return (\n        this.renderSubmitLayout()\n      )\n    }\n    if (isAdmin) {\n      return (\n        this.renderAdminLayout()\n      )\n    }\n    return null\n  }\n}\n\nDashboardLayout.propTypes = {\n  recentlySubmittedTimesheets: PropTypes.array.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n  setSignUpError: PropTypes.func.isRequired,\n  signUpWorker: PropTypes.func.isRequired,\n  employees: PropTypes.array.isRequired,\n  userState: PropTypes.object.isRequired,\n  isAdmin: PropTypes.bool.isRequired,\n  setTimesheetFileError: PropTypes.func.isRequired,\n  saveToDatabase: PropTypes.func.isRequired,\n  timesheetUploadError: PropTypes.func.isRequired,\n  timesheetUploadStart: PropTypes.func.isRequired,\n  timesheetUploading: PropTypes.bool.isRequired,\n}\n\nexport default DashboardLayout\n"]},"metadata":{},"sourceType":"module"}
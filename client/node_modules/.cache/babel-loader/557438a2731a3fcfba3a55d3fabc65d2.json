{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _Sheet = require('./Sheet');\n\nvar _Sheet2 = _interopRequireDefault(_Sheet);\n\nvar _Row = require('./Row');\n\nvar _Row2 = _interopRequireDefault(_Row);\n\nvar _Cell = require('./Cell');\n\nvar _Cell2 = _interopRequireDefault(_Cell);\n\nvar _DataCell = require('./DataCell');\n\nvar _DataCell2 = _interopRequireDefault(_DataCell);\n\nvar _DataEditor = require('./DataEditor');\n\nvar _DataEditor2 = _interopRequireDefault(_DataEditor);\n\nvar _ValueViewer = require('./ValueViewer');\n\nvar _ValueViewer2 = _interopRequireDefault(_ValueViewer);\n\nvar _keys = require('./keys');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar isEmpty = function isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n};\n\nvar range = function range(start, end) {\n  var array = [];\n  var inc = end - start > 0;\n\n  for (var i = start; inc ? i <= end : i >= end; inc ? i++ : i--) {\n    inc ? array.push(i) : array.unshift(i);\n  }\n\n  return array;\n};\n\nvar defaultParsePaste = function defaultParsePaste(str) {\n  return str.split(/\\r\\n|\\n|\\r/).map(function (row) {\n    return row.split('\\t');\n  });\n};\n\nvar DataSheet = function (_PureComponent) {\n  _inherits(DataSheet, _PureComponent);\n\n  function DataSheet(props) {\n    _classCallCheck(this, DataSheet);\n\n    var _this = _possibleConstructorReturn(this, (DataSheet.__proto__ || Object.getPrototypeOf(DataSheet)).call(this, props));\n\n    _this.onMouseDown = _this.onMouseDown.bind(_this);\n    _this.onMouseUp = _this.onMouseUp.bind(_this);\n    _this.onMouseOver = _this.onMouseOver.bind(_this);\n    _this.onDoubleClick = _this.onDoubleClick.bind(_this);\n    _this.onContextMenu = _this.onContextMenu.bind(_this);\n    _this.handleNavigate = _this.handleNavigate.bind(_this);\n    _this.handleKey = _this.handleKey.bind(_this).bind(_this);\n    _this.handleCut = _this.handleCut.bind(_this);\n    _this.handleCopy = _this.handleCopy.bind(_this);\n    _this.handlePaste = _this.handlePaste.bind(_this);\n    _this.pageClick = _this.pageClick.bind(_this);\n    _this.onChange = _this.onChange.bind(_this);\n    _this.onRevert = _this.onRevert.bind(_this);\n    _this.isSelected = _this.isSelected.bind(_this);\n    _this.isEditing = _this.isEditing.bind(_this);\n    _this.isClearing = _this.isClearing.bind(_this);\n    _this.handleComponentKey = _this.handleComponentKey.bind(_this);\n    _this.handleKeyboardCellMovement = _this.handleKeyboardCellMovement.bind(_this);\n    _this.defaultState = {\n      start: {},\n      end: {},\n      selecting: false,\n      forceEdit: false,\n      editing: {},\n      clear: {}\n    };\n    _this.state = _this.defaultState;\n    _this.removeAllListeners = _this.removeAllListeners.bind(_this);\n    return _this;\n  }\n\n  _createClass(DataSheet, [{\n    key: 'removeAllListeners',\n    value: function removeAllListeners() {\n      document.removeEventListener('mousedown', this.pageClick);\n      document.removeEventListener('mouseup', this.onMouseUp);\n      document.removeEventListener('cut', this.handleCut);\n      document.removeEventListener('copy', this.handleCopy);\n      document.removeEventListener('paste', this.handlePaste);\n      document.removeEventListener('keydown', this.handlePaste);\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // Add listener scoped to the DataSheet that catches otherwise unhandled\n      // keyboard events when displaying components\n      this.dgDom && this.dgDom.addEventListener('keydown', this.handleComponentKey);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.dgDom && this.dgDom.removeEventListener('keydown', this.handleComponentKey);\n      this.removeAllListeners();\n    }\n  }, {\n    key: 'isSelectionControlled',\n    value: function isSelectionControlled() {\n      return 'selected' in this.props;\n    }\n  }, {\n    key: 'getState',\n    value: function getState() {\n      var state = this.state;\n\n      if (this.isSelectionControlled()) {\n        var _ref = this.props.selected || {},\n            start = _ref.start,\n            end = _ref.end;\n\n        start = start || this.defaultState.start;\n        end = end || this.defaultState.end;\n        state = _extends({}, state, {\n          start: start,\n          end: end\n        });\n      }\n\n      return state;\n    }\n  }, {\n    key: '_setState',\n    value: function _setState(state) {\n      if (this.isSelectionControlled() && ('start' in state || 'end' in state)) {\n        var start = state.start,\n            end = state.end,\n            rest = _objectWithoutProperties(state, ['start', 'end']);\n\n        var _props = this.props,\n            selected = _props.selected,\n            onSelect = _props.onSelect;\n        selected = selected || {};\n\n        if (!start) {\n          start = 'start' in selected ? selected.start : this.defaultState.start;\n        }\n\n        if (!end) {\n          end = 'end' in selected ? selected.end : this.defaultState.end;\n        }\n\n        onSelect && onSelect({\n          start: start,\n          end: end\n        });\n        this.setState(rest);\n      } else {\n        this.setState(state);\n      }\n    }\n  }, {\n    key: 'pageClick',\n    value: function pageClick(e) {\n      var element = this.dgDom;\n\n      if (!element.contains(e.target)) {\n        this.setState(this.defaultState);\n        this.removeAllListeners();\n      }\n    }\n  }, {\n    key: 'handleCut',\n    value: function handleCut(e) {\n      if (isEmpty(this.state.editing)) {\n        e.preventDefault();\n        this.handleCopy(e);\n\n        var _getState = this.getState(),\n            start = _getState.start,\n            end = _getState.end;\n\n        this.clearSelectedCells(start, end);\n      }\n    }\n  }, {\n    key: 'handleCopy',\n    value: function handleCopy(e) {\n      if (isEmpty(this.state.editing)) {\n        e.preventDefault();\n        var _props2 = this.props,\n            dataRenderer = _props2.dataRenderer,\n            valueRenderer = _props2.valueRenderer,\n            data = _props2.data;\n\n        var _getState2 = this.getState(),\n            start = _getState2.start,\n            end = _getState2.end;\n\n        var text = range(start.i, end.i).map(function (i) {\n          return range(start.j, end.j).map(function (j) {\n            var cell = data[i][j];\n            var value = dataRenderer ? dataRenderer(cell, i, j) : null;\n\n            if (value === '' || value === null || typeof value === 'undefined') {\n              return valueRenderer(cell, i, j);\n            }\n\n            return value;\n          }).join('\\t');\n        }).join('\\n');\n        e.clipboardData.setData('text/plain', text);\n      }\n    }\n  }, {\n    key: 'handlePaste',\n    value: function handlePaste(e) {\n      if (isEmpty(this.state.editing)) {\n        var _getState3 = this.getState(),\n            start = _getState3.start,\n            end = _getState3.end;\n\n        start = {\n          i: Math.min(start.i, end.i),\n          j: Math.min(start.j, end.j)\n        };\n        end = {\n          i: Math.max(start.i, end.i),\n          j: Math.max(start.j, end.j)\n        };\n        var parse = this.props.parsePaste || defaultParsePaste;\n        var changes = [];\n        var pasteData = [];\n\n        if (window.clipboardData && window.clipboardData.getData) {\n          // IE\n          pasteData = parse(window.clipboardData.getData('Text'));\n        } else if (e.clipboardData && e.clipboardData.getData) {\n          pasteData = parse(e.clipboardData.getData('text/plain'));\n        } // in order of preference\n\n\n        var _props3 = this.props,\n            data = _props3.data,\n            onCellsChanged = _props3.onCellsChanged,\n            onPaste = _props3.onPaste,\n            onChange = _props3.onChange;\n\n        if (onCellsChanged) {\n          var additions = [];\n          pasteData.forEach(function (row, i) {\n            row.forEach(function (value, j) {\n              end = {\n                i: start.i + i,\n                j: start.j + j\n              };\n              var cell = data[end.i] && data[end.i][end.j];\n\n              if (!cell) {\n                additions.push({\n                  row: end.i,\n                  col: end.j,\n                  value: value\n                });\n              } else if (!cell.readOnly) {\n                changes.push({\n                  cell: cell,\n                  row: end.i,\n                  col: end.j,\n                  value: value\n                });\n              }\n            });\n          });\n\n          if (additions.length) {\n            onCellsChanged(changes, additions);\n          } else {\n            onCellsChanged(changes);\n          }\n        } else if (onPaste) {\n          pasteData.forEach(function (row, i) {\n            var rowData = [];\n            row.forEach(function (pastedData, j) {\n              end = {\n                i: start.i + i,\n                j: start.j + j\n              };\n              var cell = data[end.i] && data[end.i][end.j];\n              rowData.push({\n                cell: cell,\n                data: pastedData\n              });\n            });\n            changes.push(rowData);\n          });\n          onPaste(changes);\n        } else if (onChange) {\n          pasteData.forEach(function (row, i) {\n            row.forEach(function (value, j) {\n              end = {\n                i: start.i + i,\n                j: start.j + j\n              };\n              var cell = data[end.i] && data[end.i][end.j];\n\n              if (cell && !cell.readOnly) {\n                onChange(cell, end.i, end.j, value);\n              }\n            });\n          });\n        }\n\n        this._setState({\n          end: end\n        });\n      }\n    }\n  }, {\n    key: 'handleKeyboardCellMovement',\n    value: function handleKeyboardCellMovement(e) {\n      var commit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _getState4 = this.getState(),\n          start = _getState4.start,\n          editing = _getState4.editing;\n\n      var data = this.props.data;\n      var isEditing = editing && !isEmpty(editing);\n      var currentCell = data[start.i] && data[start.i][start.j];\n\n      if (isEditing && !commit) {\n        return false;\n      }\n\n      var hasComponent = currentCell && currentCell.component;\n      var keyCode = e.which || e.keyCode;\n\n      if (hasComponent && isEditing) {\n        e.preventDefault();\n        return;\n      }\n\n      if (keyCode === _keys.TAB_KEY) {\n        this.handleNavigate(e, {\n          i: 0,\n          j: e.shiftKey ? -1 : 1\n        }, true);\n      } else if (keyCode === _keys.RIGHT_KEY) {\n        this.handleNavigate(e, {\n          i: 0,\n          j: 1\n        });\n      } else if (keyCode === _keys.LEFT_KEY) {\n        this.handleNavigate(e, {\n          i: 0,\n          j: -1\n        });\n      } else if (keyCode === _keys.UP_KEY) {\n        this.handleNavigate(e, {\n          i: -1,\n          j: 0\n        });\n      } else if (keyCode === _keys.DOWN_KEY) {\n        this.handleNavigate(e, {\n          i: 1,\n          j: 0\n        });\n      } else if (commit && keyCode === _keys.ENTER_KEY) {\n        this.handleNavigate(e, {\n          i: e.shiftKey ? -1 : 1,\n          j: 0\n        });\n      }\n    }\n  }, {\n    key: 'handleKey',\n    value: function handleKey(e) {\n      if (e.isPropagationStopped && e.isPropagationStopped()) {\n        return;\n      }\n\n      var keyCode = e.which || e.keyCode;\n\n      var _getState5 = this.getState(),\n          start = _getState5.start,\n          end = _getState5.end,\n          editing = _getState5.editing;\n\n      var isEditing = editing && !isEmpty(editing);\n      var noCellsSelected = !start || isEmpty(start);\n      var ctrlKeyPressed = e.ctrlKey || e.metaKey;\n      var deleteKeysPressed = keyCode === _keys.DELETE_KEY || keyCode === _keys.BACKSPACE_KEY;\n      var enterKeyPressed = keyCode === _keys.ENTER_KEY;\n      var numbersPressed = keyCode >= 48 && keyCode <= 57;\n      var lettersPressed = keyCode >= 65 && keyCode <= 90;\n      var latin1Supplement = keyCode >= 160 && keyCode <= 255;\n      var numPadKeysPressed = keyCode >= 96 && keyCode <= 105;\n      var currentCell = !noCellsSelected && this.props.data[start.i][start.j];\n      var equationKeysPressed = [187,\n      /* equal */\n      189,\n      /* substract */\n      190,\n      /* period */\n      107,\n      /* add */\n      109,\n      /* decimal point */\n      110].indexOf(keyCode) > -1;\n\n      if (noCellsSelected || ctrlKeyPressed) {\n        return true;\n      }\n\n      if (!isEditing) {\n        this.handleKeyboardCellMovement(e);\n\n        if (deleteKeysPressed) {\n          e.preventDefault();\n          this.clearSelectedCells(start, end);\n        } else if (currentCell && !currentCell.readOnly) {\n          if (enterKeyPressed) {\n            this._setState({\n              editing: start,\n              clear: {},\n              forceEdit: true\n            });\n\n            e.preventDefault();\n          } else if (numbersPressed || numPadKeysPressed || lettersPressed || latin1Supplement || equationKeysPressed) {\n            // empty out cell if user starts typing without pressing enter\n            this._setState({\n              editing: start,\n              clear: start,\n              forceEdit: false\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: 'getSelectedCells',\n    value: function getSelectedCells(data, start, end) {\n      var selected = [];\n      range(start.i, end.i).map(function (row) {\n        range(start.j, end.j).map(function (col) {\n          if (data[row] && data[row][col]) {\n            selected.push({\n              cell: data[row][col],\n              row: row,\n              col: col\n            });\n          }\n        });\n      });\n      return selected;\n    }\n  }, {\n    key: 'clearSelectedCells',\n    value: function clearSelectedCells(start, end) {\n      var _this2 = this;\n\n      var _props4 = this.props,\n          data = _props4.data,\n          onCellsChanged = _props4.onCellsChanged,\n          onChange = _props4.onChange;\n      var cells = this.getSelectedCells(data, start, end).filter(function (cell) {\n        return !cell.cell.readOnly;\n      }).map(function (cell) {\n        return _extends({}, cell, {\n          value: ''\n        });\n      });\n\n      if (onCellsChanged) {\n        onCellsChanged(cells);\n        this.onRevert();\n      } else if (onChange) {\n        // ugly solution brought to you by https://reactjs.org/docs/react-component.html#setstate\n        // setState in a loop is unreliable\n        setTimeout(function () {\n          cells.forEach(function (_ref2) {\n            var cell = _ref2.cell,\n                row = _ref2.row,\n                col = _ref2.col,\n                value = _ref2.value;\n            onChange(cell, row, col, value);\n          });\n\n          _this2.onRevert();\n        }, 0);\n      }\n    }\n  }, {\n    key: 'handleNavigate',\n    value: function handleNavigate(e, offsets, jumpRow) {\n      var _this3 = this;\n\n      if (offsets && (offsets.i || offsets.j)) {\n        var _getState6 = this.getState(),\n            start = _getState6.start,\n            end = _getState6.end;\n\n        var data = this.props.data;\n        var oldStartLocation = {\n          i: start.i,\n          j: start.j\n        };\n        var newEndLocation = {\n          i: end.i + offsets.i,\n          j: end.j + offsets.j\n        };\n        var newLocation = {\n          i: start.i + offsets.i,\n          j: start.j + offsets.j\n        };\n\n        var updateLocation = function updateLocation() {\n          if (data[newLocation.i] && typeof data[newLocation.i][newLocation.j] !== 'undefined') {\n            _this3._setState({\n              start: e.shiftKey && !jumpRow ? oldStartLocation : newLocation,\n              end: e.shiftKey && !jumpRow ? newEndLocation : newLocation,\n              editing: {}\n            });\n\n            e.preventDefault();\n            return true;\n          }\n\n          return false;\n        };\n\n        if (!updateLocation() && jumpRow) {\n          if (offsets.j < 0) {\n            newLocation = {\n              i: start.i - 1,\n              j: data[0].length - 1\n            };\n          } else {\n            newLocation = {\n              i: start.i + 1,\n              j: 0\n            };\n          }\n\n          updateLocation();\n        }\n      }\n    }\n  }, {\n    key: 'handleComponentKey',\n    value: function handleComponentKey(e) {\n      var _this4 = this; // handles keyboard events when editing components\n\n\n      var keyCode = e.which || e.keyCode;\n\n      if (![_keys.ENTER_KEY, _keys.ESCAPE_KEY, _keys.TAB_KEY].includes(keyCode)) {\n        return;\n      }\n\n      var editing = this.state.editing;\n      var data = this.props.data;\n      var isEditing = !isEmpty(editing);\n\n      if (isEditing) {\n        var currentCell = data[editing.i][editing.j];\n        var offset = e.shiftKey ? -1 : 1;\n\n        if (currentCell && currentCell.component && !currentCell.forceComponent) {\n          e.preventDefault();\n          var func = this.onRevert; // ESCAPE_KEY\n\n          if (keyCode === _keys.ENTER_KEY) {\n            func = function func() {\n              return _this4.handleNavigate(e, {\n                i: offset,\n                j: 0\n              });\n            };\n          } else if (keyCode === _keys.TAB_KEY) {\n            func = function func() {\n              return _this4.handleNavigate(e, {\n                i: 0,\n                j: offset\n              }, true);\n            };\n          } // setTimeout makes sure that component is done handling the event before we take over\n\n\n          setTimeout(function () {\n            func();\n            _this4.dgDom && _this4.dgDom.focus();\n          }, 1);\n        }\n      }\n    }\n  }, {\n    key: 'onContextMenu',\n    value: function onContextMenu(evt, i, j) {\n      var cell = this.props.data[i][j];\n\n      if (this.props.onContextMenu) {\n        this.props.onContextMenu(evt, cell, i, j);\n      }\n    }\n  }, {\n    key: 'onDoubleClick',\n    value: function onDoubleClick(i, j) {\n      var cell = this.props.data[i][j];\n\n      if (!cell.readOnly) {\n        this._setState({\n          editing: {\n            i: i,\n            j: j\n          },\n          forceEdit: true,\n          clear: {}\n        });\n      }\n    }\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(i, j, e) {\n      var _this5 = this;\n\n      var isNowEditingSameCell = !isEmpty(this.state.editing) && this.state.editing.i === i && this.state.editing.j === j;\n      var editing = isEmpty(this.state.editing) || this.state.editing.i !== i || this.state.editing.j !== j ? {} : this.state.editing;\n\n      this._setState({\n        selecting: !isNowEditingSameCell,\n        start: e.shiftKey ? this.state.start : {\n          i: i,\n          j: j\n        },\n        end: {\n          i: i,\n          j: j\n        },\n        editing: editing,\n        forceEdit: !!isNowEditingSameCell\n      });\n\n      var ua = window.navigator.userAgent;\n      var isIE = /MSIE|Trident/.test(ua); // Listen for Ctrl + V in case of IE\n\n      if (isIE) {\n        document.addEventListener('keydown', function (e) {\n          if ((e.keyCode === 86 || e.which === 86) && e.ctrlKey) {\n            _this5.handlePaste(e);\n          }\n        });\n      } // Keep listening to mouse if user releases the mouse (dragging outside)\n\n\n      document.addEventListener('mouseup', this.onMouseUp); // Listen for any outside mouse clicks\n\n      document.addEventListener('mousedown', this.pageClick); // Cut, copy and paste event handlers\n\n      document.addEventListener('cut', this.handleCut);\n      document.addEventListener('copy', this.handleCopy);\n      document.addEventListener('paste', this.handlePaste);\n    }\n  }, {\n    key: 'onMouseOver',\n    value: function onMouseOver(i, j) {\n      if (this.state.selecting && isEmpty(this.state.editing)) {\n        this._setState({\n          end: {\n            i: i,\n            j: j\n          }\n        });\n      }\n    }\n  }, {\n    key: 'onMouseUp',\n    value: function onMouseUp() {\n      this._setState({\n        selecting: false\n      });\n\n      document.removeEventListener('mouseup', this.onMouseUp);\n    }\n  }, {\n    key: 'onChange',\n    value: function onChange(row, col, value) {\n      var _props5 = this.props,\n          onChange = _props5.onChange,\n          onCellsChanged = _props5.onCellsChanged,\n          data = _props5.data;\n\n      if (onCellsChanged) {\n        onCellsChanged([{\n          cell: data[row][col],\n          row: row,\n          col: col,\n          value: value\n        }]);\n      } else if (onChange) {\n        onChange(data[row][col], row, col, value);\n      }\n\n      this.onRevert();\n    }\n  }, {\n    key: 'onRevert',\n    value: function onRevert() {\n      this._setState({\n        editing: {}\n      });\n\n      this.dgDom && this.dgDom.focus();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _state = this.state,\n          start = _state.start,\n          end = _state.end;\n      var prevEnd = prevState.end;\n\n      if (!isEmpty(end) && !(end.i === prevEnd.i && end.j === prevEnd.j) && !this.isSelectionControlled()) {\n        this.props.onSelect && this.props.onSelect({\n          start: start,\n          end: end\n        });\n      }\n    }\n  }, {\n    key: 'isSelected',\n    value: function isSelected(i, j) {\n      var _getState7 = this.getState(),\n          start = _getState7.start,\n          end = _getState7.end;\n\n      var posX = j >= start.j && j <= end.j;\n      var negX = j <= start.j && j >= end.j;\n      var posY = i >= start.i && i <= end.i;\n      var negY = i <= start.i && i >= end.i;\n      return posX && posY || negX && posY || negX && negY || posX && negY;\n    }\n  }, {\n    key: 'isEditing',\n    value: function isEditing(i, j) {\n      return this.state.editing.i === i && this.state.editing.j === j;\n    }\n  }, {\n    key: 'isClearing',\n    value: function isClearing(i, j) {\n      return this.state.clear.i === i && this.state.clear.j === j;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this6 = this;\n\n      var _props6 = this.props,\n          SheetRenderer = _props6.sheetRenderer,\n          RowRenderer = _props6.rowRenderer,\n          cellRenderer = _props6.cellRenderer,\n          dataRenderer = _props6.dataRenderer,\n          valueRenderer = _props6.valueRenderer,\n          dataEditor = _props6.dataEditor,\n          valueViewer = _props6.valueViewer,\n          attributesRenderer = _props6.attributesRenderer,\n          className = _props6.className,\n          overflow = _props6.overflow,\n          data = _props6.data,\n          keyFn = _props6.keyFn;\n      var forceEdit = this.state.forceEdit;\n      return _react2.default.createElement('span', {\n        ref: function ref(r) {\n          _this6.dgDom = r;\n        },\n        tabIndex: '0',\n        className: 'data-grid-container',\n        onKeyDown: this.handleKey\n      }, _react2.default.createElement(SheetRenderer, {\n        data: data,\n        className: ['data-grid', className, overflow].filter(function (a) {\n          return a;\n        }).join(' ')\n      }, data.map(function (row, i) {\n        return _react2.default.createElement(RowRenderer, {\n          key: keyFn ? keyFn(i) : i,\n          row: i,\n          cells: row\n        }, row.map(function (cell, j) {\n          return _react2.default.createElement(_DataCell2.default, {\n            key: cell.key ? cell.key : i + '-' + j,\n            row: i,\n            col: j,\n            cell: cell,\n            forceEdit: forceEdit,\n            onMouseDown: _this6.onMouseDown,\n            onMouseOver: _this6.onMouseOver,\n            onDoubleClick: _this6.onDoubleClick,\n            onContextMenu: _this6.onContextMenu,\n            onChange: _this6.onChange,\n            onRevert: _this6.onRevert,\n            onNavigate: _this6.handleKeyboardCellMovement,\n            onKey: _this6.handleKey,\n            selected: _this6.isSelected(i, j),\n            editing: _this6.isEditing(i, j),\n            clearing: _this6.isClearing(i, j),\n            attributesRenderer: attributesRenderer,\n            cellRenderer: cellRenderer,\n            valueRenderer: valueRenderer,\n            dataRenderer: dataRenderer,\n            valueViewer: valueViewer,\n            dataEditor: dataEditor\n          });\n        }));\n      })));\n    }\n  }]);\n\n  return DataSheet;\n}(_react.PureComponent);\n\nexports.default = DataSheet;\nDataSheet.propTypes = {\n  data: _propTypes2.default.array.isRequired,\n  className: _propTypes2.default.string,\n  overflow: _propTypes2.default.oneOf(['wrap', 'nowrap', 'clip']),\n  onChange: _propTypes2.default.func,\n  onCellsChanged: _propTypes2.default.func,\n  onContextMenu: _propTypes2.default.func,\n  onSelect: _propTypes2.default.func,\n  selected: _propTypes2.default.shape({\n    start: _propTypes2.default.shape({\n      i: _propTypes2.default.number,\n      j: _propTypes2.default.number\n    }),\n    end: _propTypes2.default.shape({\n      i: _propTypes2.default.number,\n      j: _propTypes2.default.number\n    })\n  }),\n  valueRenderer: _propTypes2.default.func.isRequired,\n  dataRenderer: _propTypes2.default.func,\n  sheetRenderer: _propTypes2.default.func.isRequired,\n  rowRenderer: _propTypes2.default.func.isRequired,\n  cellRenderer: _propTypes2.default.func.isRequired,\n  valueViewer: _propTypes2.default.func,\n  dataEditor: _propTypes2.default.func,\n  parsePaste: _propTypes2.default.func,\n  attributesRenderer: _propTypes2.default.func,\n  keyFn: _propTypes2.default.func\n};\nDataSheet.defaultProps = {\n  sheetRenderer: _Sheet2.default,\n  rowRenderer: _Row2.default,\n  cellRenderer: _Cell2.default,\n  valueViewer: _ValueViewer2.default,\n  dataEditor: _DataEditor2.default\n};","map":{"version":3,"sources":["/Users/joshkardos/Desktop/JTKStaffing/node_modules/react-datasheet/lib/DataSheet.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_Sheet","_Sheet2","_Row","_Row2","_Cell","_Cell2","_DataCell","_DataCell2","_DataEditor","_DataEditor2","_ValueViewer","_ValueViewer2","_keys","obj","__esModule","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","isEmpty","range","start","end","array","inc","push","unshift","defaultParsePaste","str","split","map","row","DataSheet","_PureComponent","_this","getPrototypeOf","onMouseDown","bind","onMouseUp","onMouseOver","onDoubleClick","onContextMenu","handleNavigate","handleKey","handleCut","handleCopy","handlePaste","pageClick","onChange","onRevert","isSelected","isEditing","isClearing","handleComponentKey","handleKeyboardCellMovement","defaultState","selecting","forceEdit","editing","clear","state","removeAllListeners","document","removeEventListener","componentDidMount","dgDom","addEventListener","componentWillUnmount","isSelectionControlled","getState","_ref","selected","_setState","rest","_props","onSelect","setState","e","element","contains","preventDefault","_getState","clearSelectedCells","_props2","dataRenderer","valueRenderer","data","_getState2","text","j","cell","join","clipboardData","setData","_getState3","Math","min","max","parse","parsePaste","changes","pasteData","window","getData","_props3","onCellsChanged","onPaste","additions","forEach","col","readOnly","rowData","pastedData","commit","undefined","_getState4","currentCell","hasComponent","component","keyCode","which","TAB_KEY","shiftKey","RIGHT_KEY","LEFT_KEY","UP_KEY","DOWN_KEY","ENTER_KEY","isPropagationStopped","_getState5","noCellsSelected","ctrlKeyPressed","ctrlKey","metaKey","deleteKeysPressed","DELETE_KEY","BACKSPACE_KEY","enterKeyPressed","numbersPressed","lettersPressed","latin1Supplement","numPadKeysPressed","equationKeysPressed","getSelectedCells","_this2","_props4","cells","filter","setTimeout","_ref2","offsets","jumpRow","_this3","_getState6","oldStartLocation","newEndLocation","newLocation","updateLocation","_this4","ESCAPE_KEY","includes","offset","forceComponent","func","focus","evt","_this5","isNowEditingSameCell","ua","navigator","userAgent","isIE","test","_props5","componentDidUpdate","prevProps","prevState","_state","prevEnd","_getState7","posX","negX","posY","negY","render","_this6","_props6","SheetRenderer","sheetRenderer","RowRenderer","rowRenderer","cellRenderer","dataEditor","valueViewer","attributesRenderer","className","overflow","keyFn","createElement","ref","r","tabIndex","onKeyDown","a","onNavigate","onKey","clearing","PureComponent","propTypes","isRequired","string","oneOf","shape","number","defaultProps"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _Sheet = require('./Sheet');\n\nvar _Sheet2 = _interopRequireDefault(_Sheet);\n\nvar _Row = require('./Row');\n\nvar _Row2 = _interopRequireDefault(_Row);\n\nvar _Cell = require('./Cell');\n\nvar _Cell2 = _interopRequireDefault(_Cell);\n\nvar _DataCell = require('./DataCell');\n\nvar _DataCell2 = _interopRequireDefault(_DataCell);\n\nvar _DataEditor = require('./DataEditor');\n\nvar _DataEditor2 = _interopRequireDefault(_DataEditor);\n\nvar _ValueViewer = require('./ValueViewer');\n\nvar _ValueViewer2 = _interopRequireDefault(_ValueViewer);\n\nvar _keys = require('./keys');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar isEmpty = function isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n};\n\nvar range = function range(start, end) {\n  var array = [];\n  var inc = end - start > 0;\n  for (var i = start; inc ? i <= end : i >= end; inc ? i++ : i--) {\n    inc ? array.push(i) : array.unshift(i);\n  }\n  return array;\n};\n\nvar defaultParsePaste = function defaultParsePaste(str) {\n  return str.split(/\\r\\n|\\n|\\r/).map(function (row) {\n    return row.split('\\t');\n  });\n};\n\nvar DataSheet = function (_PureComponent) {\n  _inherits(DataSheet, _PureComponent);\n\n  function DataSheet(props) {\n    _classCallCheck(this, DataSheet);\n\n    var _this = _possibleConstructorReturn(this, (DataSheet.__proto__ || Object.getPrototypeOf(DataSheet)).call(this, props));\n\n    _this.onMouseDown = _this.onMouseDown.bind(_this);\n    _this.onMouseUp = _this.onMouseUp.bind(_this);\n    _this.onMouseOver = _this.onMouseOver.bind(_this);\n    _this.onDoubleClick = _this.onDoubleClick.bind(_this);\n    _this.onContextMenu = _this.onContextMenu.bind(_this);\n    _this.handleNavigate = _this.handleNavigate.bind(_this);\n    _this.handleKey = _this.handleKey.bind(_this).bind(_this);\n    _this.handleCut = _this.handleCut.bind(_this);\n    _this.handleCopy = _this.handleCopy.bind(_this);\n    _this.handlePaste = _this.handlePaste.bind(_this);\n    _this.pageClick = _this.pageClick.bind(_this);\n    _this.onChange = _this.onChange.bind(_this);\n    _this.onRevert = _this.onRevert.bind(_this);\n    _this.isSelected = _this.isSelected.bind(_this);\n    _this.isEditing = _this.isEditing.bind(_this);\n    _this.isClearing = _this.isClearing.bind(_this);\n    _this.handleComponentKey = _this.handleComponentKey.bind(_this);\n\n    _this.handleKeyboardCellMovement = _this.handleKeyboardCellMovement.bind(_this);\n\n    _this.defaultState = {\n      start: {},\n      end: {},\n      selecting: false,\n      forceEdit: false,\n      editing: {},\n      clear: {}\n    };\n    _this.state = _this.defaultState;\n\n    _this.removeAllListeners = _this.removeAllListeners.bind(_this);\n    return _this;\n  }\n\n  _createClass(DataSheet, [{\n    key: 'removeAllListeners',\n    value: function removeAllListeners() {\n      document.removeEventListener('mousedown', this.pageClick);\n      document.removeEventListener('mouseup', this.onMouseUp);\n      document.removeEventListener('cut', this.handleCut);\n      document.removeEventListener('copy', this.handleCopy);\n      document.removeEventListener('paste', this.handlePaste);\n      document.removeEventListener('keydown', this.handlePaste);\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // Add listener scoped to the DataSheet that catches otherwise unhandled\n      // keyboard events when displaying components\n      this.dgDom && this.dgDom.addEventListener('keydown', this.handleComponentKey);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.dgDom && this.dgDom.removeEventListener('keydown', this.handleComponentKey);\n      this.removeAllListeners();\n    }\n  }, {\n    key: 'isSelectionControlled',\n    value: function isSelectionControlled() {\n      return 'selected' in this.props;\n    }\n  }, {\n    key: 'getState',\n    value: function getState() {\n      var state = this.state;\n      if (this.isSelectionControlled()) {\n        var _ref = this.props.selected || {},\n            start = _ref.start,\n            end = _ref.end;\n\n        start = start || this.defaultState.start;\n        end = end || this.defaultState.end;\n        state = _extends({}, state, { start: start, end: end });\n      }\n      return state;\n    }\n  }, {\n    key: '_setState',\n    value: function _setState(state) {\n      if (this.isSelectionControlled() && ('start' in state || 'end' in state)) {\n        var start = state.start,\n            end = state.end,\n            rest = _objectWithoutProperties(state, ['start', 'end']);\n\n        var _props = this.props,\n            selected = _props.selected,\n            onSelect = _props.onSelect;\n\n        selected = selected || {};\n        if (!start) {\n          start = 'start' in selected ? selected.start : this.defaultState.start;\n        }\n        if (!end) {\n          end = 'end' in selected ? selected.end : this.defaultState.end;\n        }\n        onSelect && onSelect({ start: start, end: end });\n        this.setState(rest);\n      } else {\n        this.setState(state);\n      }\n    }\n  }, {\n    key: 'pageClick',\n    value: function pageClick(e) {\n      var element = this.dgDom;\n      if (!element.contains(e.target)) {\n        this.setState(this.defaultState);\n        this.removeAllListeners();\n      }\n    }\n  }, {\n    key: 'handleCut',\n    value: function handleCut(e) {\n      if (isEmpty(this.state.editing)) {\n        e.preventDefault();\n        this.handleCopy(e);\n\n        var _getState = this.getState(),\n            start = _getState.start,\n            end = _getState.end;\n\n        this.clearSelectedCells(start, end);\n      }\n    }\n  }, {\n    key: 'handleCopy',\n    value: function handleCopy(e) {\n      if (isEmpty(this.state.editing)) {\n        e.preventDefault();\n        var _props2 = this.props,\n            dataRenderer = _props2.dataRenderer,\n            valueRenderer = _props2.valueRenderer,\n            data = _props2.data;\n\n        var _getState2 = this.getState(),\n            start = _getState2.start,\n            end = _getState2.end;\n\n        var text = range(start.i, end.i).map(function (i) {\n          return range(start.j, end.j).map(function (j) {\n            var cell = data[i][j];\n            var value = dataRenderer ? dataRenderer(cell, i, j) : null;\n            if (value === '' || value === null || typeof value === 'undefined') {\n              return valueRenderer(cell, i, j);\n            }\n            return value;\n          }).join('\\t');\n        }).join('\\n');\n        e.clipboardData.setData('text/plain', text);\n      }\n    }\n  }, {\n    key: 'handlePaste',\n    value: function handlePaste(e) {\n      if (isEmpty(this.state.editing)) {\n        var _getState3 = this.getState(),\n            start = _getState3.start,\n            end = _getState3.end;\n\n        start = { i: Math.min(start.i, end.i), j: Math.min(start.j, end.j) };\n        end = { i: Math.max(start.i, end.i), j: Math.max(start.j, end.j) };\n\n        var parse = this.props.parsePaste || defaultParsePaste;\n        var changes = [];\n        var pasteData = [];\n        if (window.clipboardData && window.clipboardData.getData) {\n          // IE\n          pasteData = parse(window.clipboardData.getData('Text'));\n        } else if (e.clipboardData && e.clipboardData.getData) {\n          pasteData = parse(e.clipboardData.getData('text/plain'));\n        }\n\n        // in order of preference\n        var _props3 = this.props,\n            data = _props3.data,\n            onCellsChanged = _props3.onCellsChanged,\n            onPaste = _props3.onPaste,\n            onChange = _props3.onChange;\n\n        if (onCellsChanged) {\n          var additions = [];\n          pasteData.forEach(function (row, i) {\n            row.forEach(function (value, j) {\n              end = { i: start.i + i, j: start.j + j };\n              var cell = data[end.i] && data[end.i][end.j];\n              if (!cell) {\n                additions.push({ row: end.i, col: end.j, value: value });\n              } else if (!cell.readOnly) {\n                changes.push({ cell: cell, row: end.i, col: end.j, value: value });\n              }\n            });\n          });\n          if (additions.length) {\n            onCellsChanged(changes, additions);\n          } else {\n            onCellsChanged(changes);\n          }\n        } else if (onPaste) {\n          pasteData.forEach(function (row, i) {\n            var rowData = [];\n            row.forEach(function (pastedData, j) {\n              end = { i: start.i + i, j: start.j + j };\n              var cell = data[end.i] && data[end.i][end.j];\n              rowData.push({ cell: cell, data: pastedData });\n            });\n            changes.push(rowData);\n          });\n          onPaste(changes);\n        } else if (onChange) {\n          pasteData.forEach(function (row, i) {\n            row.forEach(function (value, j) {\n              end = { i: start.i + i, j: start.j + j };\n              var cell = data[end.i] && data[end.i][end.j];\n              if (cell && !cell.readOnly) {\n                onChange(cell, end.i, end.j, value);\n              }\n            });\n          });\n        }\n        this._setState({ end: end });\n      }\n    }\n  }, {\n    key: 'handleKeyboardCellMovement',\n    value: function handleKeyboardCellMovement(e) {\n      var commit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _getState4 = this.getState(),\n          start = _getState4.start,\n          editing = _getState4.editing;\n\n      var data = this.props.data;\n\n      var isEditing = editing && !isEmpty(editing);\n      var currentCell = data[start.i] && data[start.i][start.j];\n\n      if (isEditing && !commit) {\n        return false;\n      }\n      var hasComponent = currentCell && currentCell.component;\n\n      var keyCode = e.which || e.keyCode;\n\n      if (hasComponent && isEditing) {\n        e.preventDefault();\n        return;\n      }\n\n      if (keyCode === _keys.TAB_KEY) {\n        this.handleNavigate(e, { i: 0, j: e.shiftKey ? -1 : 1 }, true);\n      } else if (keyCode === _keys.RIGHT_KEY) {\n        this.handleNavigate(e, { i: 0, j: 1 });\n      } else if (keyCode === _keys.LEFT_KEY) {\n        this.handleNavigate(e, { i: 0, j: -1 });\n      } else if (keyCode === _keys.UP_KEY) {\n        this.handleNavigate(e, { i: -1, j: 0 });\n      } else if (keyCode === _keys.DOWN_KEY) {\n        this.handleNavigate(e, { i: 1, j: 0 });\n      } else if (commit && keyCode === _keys.ENTER_KEY) {\n        this.handleNavigate(e, { i: e.shiftKey ? -1 : 1, j: 0 });\n      }\n    }\n  }, {\n    key: 'handleKey',\n    value: function handleKey(e) {\n      if (e.isPropagationStopped && e.isPropagationStopped()) {\n        return;\n      }\n      var keyCode = e.which || e.keyCode;\n\n      var _getState5 = this.getState(),\n          start = _getState5.start,\n          end = _getState5.end,\n          editing = _getState5.editing;\n\n      var isEditing = editing && !isEmpty(editing);\n      var noCellsSelected = !start || isEmpty(start);\n      var ctrlKeyPressed = e.ctrlKey || e.metaKey;\n      var deleteKeysPressed = keyCode === _keys.DELETE_KEY || keyCode === _keys.BACKSPACE_KEY;\n      var enterKeyPressed = keyCode === _keys.ENTER_KEY;\n      var numbersPressed = keyCode >= 48 && keyCode <= 57;\n      var lettersPressed = keyCode >= 65 && keyCode <= 90;\n      var latin1Supplement = keyCode >= 160 && keyCode <= 255;\n      var numPadKeysPressed = keyCode >= 96 && keyCode <= 105;\n      var currentCell = !noCellsSelected && this.props.data[start.i][start.j];\n      var equationKeysPressed = [187, /* equal */\n      189, /* substract */\n      190, /* period */\n      107, /* add */\n      109, /* decimal point */\n      110].indexOf(keyCode) > -1;\n\n      if (noCellsSelected || ctrlKeyPressed) {\n        return true;\n      }\n\n      if (!isEditing) {\n        this.handleKeyboardCellMovement(e);\n        if (deleteKeysPressed) {\n          e.preventDefault();\n          this.clearSelectedCells(start, end);\n        } else if (currentCell && !currentCell.readOnly) {\n          if (enterKeyPressed) {\n            this._setState({ editing: start, clear: {}, forceEdit: true });\n            e.preventDefault();\n          } else if (numbersPressed || numPadKeysPressed || lettersPressed || latin1Supplement || equationKeysPressed) {\n            // empty out cell if user starts typing without pressing enter\n            this._setState({ editing: start, clear: start, forceEdit: false });\n          }\n        }\n      }\n    }\n  }, {\n    key: 'getSelectedCells',\n    value: function getSelectedCells(data, start, end) {\n      var selected = [];\n      range(start.i, end.i).map(function (row) {\n        range(start.j, end.j).map(function (col) {\n          if (data[row] && data[row][col]) {\n            selected.push({ cell: data[row][col], row: row, col: col });\n          }\n        });\n      });\n      return selected;\n    }\n  }, {\n    key: 'clearSelectedCells',\n    value: function clearSelectedCells(start, end) {\n      var _this2 = this;\n\n      var _props4 = this.props,\n          data = _props4.data,\n          onCellsChanged = _props4.onCellsChanged,\n          onChange = _props4.onChange;\n\n      var cells = this.getSelectedCells(data, start, end).filter(function (cell) {\n        return !cell.cell.readOnly;\n      }).map(function (cell) {\n        return _extends({}, cell, { value: '' });\n      });\n      if (onCellsChanged) {\n        onCellsChanged(cells);\n        this.onRevert();\n      } else if (onChange) {\n        // ugly solution brought to you by https://reactjs.org/docs/react-component.html#setstate\n        // setState in a loop is unreliable\n        setTimeout(function () {\n          cells.forEach(function (_ref2) {\n            var cell = _ref2.cell,\n                row = _ref2.row,\n                col = _ref2.col,\n                value = _ref2.value;\n\n            onChange(cell, row, col, value);\n          });\n          _this2.onRevert();\n        }, 0);\n      }\n    }\n  }, {\n    key: 'handleNavigate',\n    value: function handleNavigate(e, offsets, jumpRow) {\n      var _this3 = this;\n\n      if (offsets && (offsets.i || offsets.j)) {\n        var _getState6 = this.getState(),\n            start = _getState6.start,\n            end = _getState6.end;\n\n        var data = this.props.data;\n\n        var oldStartLocation = { i: start.i, j: start.j };\n        var newEndLocation = { i: end.i + offsets.i, j: end.j + offsets.j };\n\n        var newLocation = { i: start.i + offsets.i, j: start.j + offsets.j };\n\n        var updateLocation = function updateLocation() {\n          if (data[newLocation.i] && typeof data[newLocation.i][newLocation.j] !== 'undefined') {\n            _this3._setState({\n              start: e.shiftKey && !jumpRow ? oldStartLocation : newLocation,\n              end: e.shiftKey && !jumpRow ? newEndLocation : newLocation,\n              editing: {}\n            });\n            e.preventDefault();\n            return true;\n          }\n          return false;\n        };\n        if (!updateLocation() && jumpRow) {\n          if (offsets.j < 0) {\n            newLocation = { i: start.i - 1, j: data[0].length - 1 };\n          } else {\n            newLocation = { i: start.i + 1, j: 0 };\n          }\n          updateLocation();\n        }\n      }\n    }\n  }, {\n    key: 'handleComponentKey',\n    value: function handleComponentKey(e) {\n      var _this4 = this;\n\n      // handles keyboard events when editing components\n      var keyCode = e.which || e.keyCode;\n      if (![_keys.ENTER_KEY, _keys.ESCAPE_KEY, _keys.TAB_KEY].includes(keyCode)) {\n        return;\n      }\n      var editing = this.state.editing;\n      var data = this.props.data;\n\n      var isEditing = !isEmpty(editing);\n      if (isEditing) {\n        var currentCell = data[editing.i][editing.j];\n        var offset = e.shiftKey ? -1 : 1;\n        if (currentCell && currentCell.component && !currentCell.forceComponent) {\n          e.preventDefault();\n          var func = this.onRevert; // ESCAPE_KEY\n          if (keyCode === _keys.ENTER_KEY) {\n            func = function func() {\n              return _this4.handleNavigate(e, { i: offset, j: 0 });\n            };\n          } else if (keyCode === _keys.TAB_KEY) {\n            func = function func() {\n              return _this4.handleNavigate(e, { i: 0, j: offset }, true);\n            };\n          }\n          // setTimeout makes sure that component is done handling the event before we take over\n          setTimeout(function () {\n            func();_this4.dgDom && _this4.dgDom.focus();\n          }, 1);\n        }\n      }\n    }\n  }, {\n    key: 'onContextMenu',\n    value: function onContextMenu(evt, i, j) {\n      var cell = this.props.data[i][j];\n      if (this.props.onContextMenu) {\n        this.props.onContextMenu(evt, cell, i, j);\n      }\n    }\n  }, {\n    key: 'onDoubleClick',\n    value: function onDoubleClick(i, j) {\n      var cell = this.props.data[i][j];\n      if (!cell.readOnly) {\n        this._setState({ editing: { i: i, j: j }, forceEdit: true, clear: {} });\n      }\n    }\n  }, {\n    key: 'onMouseDown',\n    value: function onMouseDown(i, j, e) {\n      var _this5 = this;\n\n      var isNowEditingSameCell = !isEmpty(this.state.editing) && this.state.editing.i === i && this.state.editing.j === j;\n      var editing = isEmpty(this.state.editing) || this.state.editing.i !== i || this.state.editing.j !== j ? {} : this.state.editing;\n\n      this._setState({\n        selecting: !isNowEditingSameCell,\n        start: e.shiftKey ? this.state.start : { i: i, j: j },\n        end: { i: i, j: j },\n        editing: editing,\n        forceEdit: !!isNowEditingSameCell\n      });\n\n      var ua = window.navigator.userAgent;\n      var isIE = /MSIE|Trident/.test(ua);\n      // Listen for Ctrl + V in case of IE\n      if (isIE) {\n        document.addEventListener('keydown', function (e) {\n          if ((e.keyCode === 86 || e.which === 86) && e.ctrlKey) {\n            _this5.handlePaste(e);\n          }\n        });\n      }\n\n      // Keep listening to mouse if user releases the mouse (dragging outside)\n      document.addEventListener('mouseup', this.onMouseUp);\n      // Listen for any outside mouse clicks\n      document.addEventListener('mousedown', this.pageClick);\n\n      // Cut, copy and paste event handlers\n      document.addEventListener('cut', this.handleCut);\n      document.addEventListener('copy', this.handleCopy);\n      document.addEventListener('paste', this.handlePaste);\n    }\n  }, {\n    key: 'onMouseOver',\n    value: function onMouseOver(i, j) {\n      if (this.state.selecting && isEmpty(this.state.editing)) {\n        this._setState({ end: { i: i, j: j } });\n      }\n    }\n  }, {\n    key: 'onMouseUp',\n    value: function onMouseUp() {\n      this._setState({ selecting: false });\n      document.removeEventListener('mouseup', this.onMouseUp);\n    }\n  }, {\n    key: 'onChange',\n    value: function onChange(row, col, value) {\n      var _props5 = this.props,\n          onChange = _props5.onChange,\n          onCellsChanged = _props5.onCellsChanged,\n          data = _props5.data;\n\n      if (onCellsChanged) {\n        onCellsChanged([{ cell: data[row][col], row: row, col: col, value: value }]);\n      } else if (onChange) {\n        onChange(data[row][col], row, col, value);\n      }\n      this.onRevert();\n    }\n  }, {\n    key: 'onRevert',\n    value: function onRevert() {\n      this._setState({ editing: {} });\n      this.dgDom && this.dgDom.focus();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _state = this.state,\n          start = _state.start,\n          end = _state.end;\n\n      var prevEnd = prevState.end;\n      if (!isEmpty(end) && !(end.i === prevEnd.i && end.j === prevEnd.j) && !this.isSelectionControlled()) {\n        this.props.onSelect && this.props.onSelect({ start: start, end: end });\n      }\n    }\n  }, {\n    key: 'isSelected',\n    value: function isSelected(i, j) {\n      var _getState7 = this.getState(),\n          start = _getState7.start,\n          end = _getState7.end;\n\n      var posX = j >= start.j && j <= end.j;\n      var negX = j <= start.j && j >= end.j;\n      var posY = i >= start.i && i <= end.i;\n      var negY = i <= start.i && i >= end.i;\n\n      return posX && posY || negX && posY || negX && negY || posX && negY;\n    }\n  }, {\n    key: 'isEditing',\n    value: function isEditing(i, j) {\n      return this.state.editing.i === i && this.state.editing.j === j;\n    }\n  }, {\n    key: 'isClearing',\n    value: function isClearing(i, j) {\n      return this.state.clear.i === i && this.state.clear.j === j;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this6 = this;\n\n      var _props6 = this.props,\n          SheetRenderer = _props6.sheetRenderer,\n          RowRenderer = _props6.rowRenderer,\n          cellRenderer = _props6.cellRenderer,\n          dataRenderer = _props6.dataRenderer,\n          valueRenderer = _props6.valueRenderer,\n          dataEditor = _props6.dataEditor,\n          valueViewer = _props6.valueViewer,\n          attributesRenderer = _props6.attributesRenderer,\n          className = _props6.className,\n          overflow = _props6.overflow,\n          data = _props6.data,\n          keyFn = _props6.keyFn;\n      var forceEdit = this.state.forceEdit;\n\n\n      return _react2.default.createElement(\n        'span',\n        { ref: function ref(r) {\n            _this6.dgDom = r;\n          }, tabIndex: '0', className: 'data-grid-container', onKeyDown: this.handleKey },\n        _react2.default.createElement(\n          SheetRenderer,\n          { data: data, className: ['data-grid', className, overflow].filter(function (a) {\n              return a;\n            }).join(' ') },\n          data.map(function (row, i) {\n            return _react2.default.createElement(\n              RowRenderer,\n              { key: keyFn ? keyFn(i) : i, row: i, cells: row },\n              row.map(function (cell, j) {\n                return _react2.default.createElement(_DataCell2.default, {\n                  key: cell.key ? cell.key : i + '-' + j,\n                  row: i,\n                  col: j,\n                  cell: cell,\n                  forceEdit: forceEdit,\n                  onMouseDown: _this6.onMouseDown,\n                  onMouseOver: _this6.onMouseOver,\n                  onDoubleClick: _this6.onDoubleClick,\n                  onContextMenu: _this6.onContextMenu,\n                  onChange: _this6.onChange,\n                  onRevert: _this6.onRevert,\n                  onNavigate: _this6.handleKeyboardCellMovement,\n                  onKey: _this6.handleKey,\n                  selected: _this6.isSelected(i, j),\n                  editing: _this6.isEditing(i, j),\n                  clearing: _this6.isClearing(i, j),\n                  attributesRenderer: attributesRenderer,\n                  cellRenderer: cellRenderer,\n                  valueRenderer: valueRenderer,\n                  dataRenderer: dataRenderer,\n                  valueViewer: valueViewer,\n                  dataEditor: dataEditor\n                });\n              })\n            );\n          })\n        )\n      );\n    }\n  }]);\n\n  return DataSheet;\n}(_react.PureComponent);\n\nexports.default = DataSheet;\n\n\nDataSheet.propTypes = {\n  data: _propTypes2.default.array.isRequired,\n  className: _propTypes2.default.string,\n  overflow: _propTypes2.default.oneOf(['wrap', 'nowrap', 'clip']),\n  onChange: _propTypes2.default.func,\n  onCellsChanged: _propTypes2.default.func,\n  onContextMenu: _propTypes2.default.func,\n  onSelect: _propTypes2.default.func,\n  selected: _propTypes2.default.shape({\n    start: _propTypes2.default.shape({\n      i: _propTypes2.default.number,\n      j: _propTypes2.default.number\n    }),\n    end: _propTypes2.default.shape({\n      i: _propTypes2.default.number,\n      j: _propTypes2.default.number\n    })\n  }),\n  valueRenderer: _propTypes2.default.func.isRequired,\n  dataRenderer: _propTypes2.default.func,\n  sheetRenderer: _propTypes2.default.func.isRequired,\n  rowRenderer: _propTypes2.default.func.isRequired,\n  cellRenderer: _propTypes2.default.func.isRequired,\n  valueViewer: _propTypes2.default.func,\n  dataEditor: _propTypes2.default.func,\n  parsePaste: _propTypes2.default.func,\n  attributesRenderer: _propTypes2.default.func,\n  keyFn: _propTypes2.default.func\n};\n\nDataSheet.defaultProps = {\n  sheetRenderer: _Sheet2.default,\n  rowRenderer: _Row2.default,\n  cellRenderer: _Cell2.default,\n  valueViewer: _ValueViewer2.default,\n  dataEditor: _DataEditor2.default\n};"]},"metadata":{},"sourceType":"script"}